<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>断念梦 – Netplan</title><link>https://desistdaydream.github.io/docs/it%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/1.%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.kernel%E5%86%85%E6%A0%B8/8.network-%E7%AE%A1%E7%90%86/linux-%E7%BD%91%E7%BB%9C%E6%A0%88%E7%AE%A1%E7%90%86/netplan/</link><description>Recent content in Netplan on 断念梦</description><generator>Hugo -- gohugo.io</generator><atom:link href="https://desistdaydream.github.io/docs/it%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/1.%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.kernel%E5%86%85%E6%A0%B8/8.network-%E7%AE%A1%E7%90%86/linux-%E7%BD%91%E7%BB%9C%E6%A0%88%E7%AE%A1%E7%90%86/netplan/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs: Netplan 配置详解</title><link>https://desistdaydream.github.io/docs/it%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/1.%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.kernel%E5%86%85%E6%A0%B8/8.network-%E7%AE%A1%E7%90%86/linux-%E7%BD%91%E7%BB%9C%E6%A0%88%E7%AE%A1%E7%90%86/netplan/netplan-%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/it%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/1.%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.kernel%E5%86%85%E6%A0%B8/8.network-%E7%AE%A1%E7%90%86/linux-%E7%BD%91%E7%BB%9C%E6%A0%88%E7%AE%A1%E7%90%86/netplan/netplan-%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3/</guid><description>
&lt;h1 id="概述">概述&lt;/h1>
&lt;blockquote>
&lt;p>参考：&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://netplan.io/reference">官网，参考&lt;/a>&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;p>Netplan 的配置文件使用 YAML 格式。&lt;code>/{lib,etc,run}/netplan/*.yaml&lt;/code> 都是 Netplan 程序读取配置文件的路径。&lt;/p>
&lt;h1 id="配置文件详解">配置文件详解&lt;/h1>
&lt;p>该 YAML 文件只有一个顶级节点：&lt;code>network: &amp;lt;Object&amp;gt;&lt;/code>，其中包括 version、设备类型(例如 ethernets、modems、wifis、birdge 等)、renderer。&lt;/p>
&lt;h2 id="version-int">version: &lt;!-- raw HTML omitted -->&lt;/h2>
&lt;h2 id="renderere-string">renderere: &lt;!-- raw HTML omitted -->&lt;/h2>
&lt;h2 id="ethernetes-object">ethernetes: &amp;lt;&lt;strong>OBJECT&lt;/strong>&amp;gt;&lt;/h2>
&lt;h2 id="所有设备的通用属性">所有设备的通用属性&lt;/h2>
&lt;p>&lt;strong>addresses: &amp;lt;[]OBJECT&amp;gt;&lt;/strong> #
&lt;strong>dtcp4: &lt;!-- raw HTML omitted -->&lt;/strong> # 为 IPv4 启用 DHCP。&lt;code>默认值：false&lt;/code>
&lt;strong>dhcp6: &lt;!-- raw HTML omitted -->&lt;/strong> # 为 IPv6 启用 DHCP。&lt;code>默认值：false&lt;/code>
&lt;strong>gateway4 | gateway6: &lt;!-- raw HTML omitted -->&lt;/strong> # &lt;strong>已弃用，使用 &lt;strong>&lt;code>**routes**&lt;/code>&lt;/strong> 字段。&lt;/strong>
**nameservers: &lt;!-- raw HTML omitted --> **# 设置 DNS 服务器和搜索域，用于手动地址配置
&lt;strong>routes: &amp;lt;[]OBJECT&amp;gt;&lt;/strong> # 为设备配置静态路由；请参阅下面的路由部分。&lt;/p>
&lt;h1 id="配置示例">配置示例&lt;/h1>
&lt;blockquote>
&lt;p>参考：&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://netplan.io/examples">官网，示例&lt;/a>&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># This is the network config written by &amp;#39;subiquity&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">network&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ethernets&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ens3&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">addresses&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">172.19.42.248&lt;/span>&lt;span style="color:#ae81ff">/24&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">dhcp4&lt;/span>: &lt;span style="color:#66d9ef">no&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">dhcp6&lt;/span>: &lt;span style="color:#66d9ef">no&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">optional&lt;/span>: &lt;span style="color:#66d9ef">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">routes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">to&lt;/span>: &lt;span style="color:#ae81ff">default&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">via&lt;/span>: &lt;span style="color:#ae81ff">172.19.42.1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">nameservers&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">addresses&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">8.8.8.8&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">version&lt;/span>: &lt;span style="color:#ae81ff">2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">renderer&lt;/span>: &lt;span style="color:#ae81ff">networkd&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>生成如下配置&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>root@lichenhao:/etc/netplan# cat /run/systemd/network/10-netplan-ens3.network
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>Match&lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Name&lt;span style="color:#f92672">=&lt;/span>ens3
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>Link&lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>RequiredForOnline&lt;span style="color:#f92672">=&lt;/span>no
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>Network&lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>LinkLocalAddressing&lt;span style="color:#f92672">=&lt;/span>ipv6
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Address&lt;span style="color:#f92672">=&lt;/span>172.19.42.248/24
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Gateway&lt;span style="color:#f92672">=&lt;/span>172.19.42.1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>DNS&lt;span style="color:#f92672">=&lt;/span>8.8.8.8
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="bridge-配置示例">Bridge 配置示例&lt;/h2>
&lt;p>应用配置
&lt;strong>netplan apply&lt;/strong>&lt;/p></description></item></channel></rss>