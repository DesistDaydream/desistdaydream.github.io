<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>断念梦 – Prometheus</title><link>https://desistdaydream.github.io/docs/it%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F/prometheus/prometheus-%E8%A1%8D%E7%94%9F%E5%93%81/prometheus-operator/cr-%E8%AF%A6%E8%A7%A3/prometheus/</link><description>Recent content in Prometheus on 断念梦</description><generator>Hugo -- gohugo.io</generator><atom:link href="https://desistdaydream.github.io/docs/it%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F/prometheus/prometheus-%E8%A1%8D%E7%94%9F%E5%93%81/prometheus-operator/cr-%E8%AF%A6%E8%A7%A3/prometheus/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs: Prometheus Manifest 详解</title><link>https://desistdaydream.github.io/docs/it%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F/prometheus/prometheus-%E8%A1%8D%E7%94%9F%E5%93%81/prometheus-operator/cr-%E8%AF%A6%E8%A7%A3/prometheus/prometheus-manifest-%E8%AF%A6%E8%A7%A3/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/it%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F/prometheus/prometheus-%E8%A1%8D%E7%94%9F%E5%93%81/prometheus-operator/cr-%E8%AF%A6%E8%A7%A3/prometheus/prometheus-manifest-%E8%AF%A6%E8%A7%A3/</guid><description>
&lt;h1 id="概述">概述&lt;/h1>
&lt;blockquote>
&lt;p>参考：&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/prometheus-operator/prometheus-operator/blob/master/Documentation/api.md#prometheus">官方文档&lt;/a>&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h1 id="apiversion-monitoringcoreoscomv1">apiVersion: monitoring.coreos.com/v1&lt;/h1>
&lt;h1 id="kind-prometheus">kind: Prometheus&lt;/h1>
&lt;h1 id="metadata">metadata:&lt;/h1>
&lt;h1 id="spec">spec:&lt;/h1>
&lt;h2 id="additionalscrapeconfigs-object--额外的抓取配置">additionalScrapeConfigs: &lt;!-- raw HTML omitted --> # 额外的抓取配置。&lt;/h2>
&lt;p>该字段可以通过 &lt;a href=".md">additional 功能&lt;/a>为 Prometheus Server 创建额外的 Scrape 配置。这种方式常用来为 Prometheus Server 创建静态的 Scrape 配置。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>key: &lt;!-- raw HTML omitted -->&lt;/strong> # 要引用的 secret 对象中 .data 字段下，指定的 key 的值&lt;/li>
&lt;li>&lt;strong>name:&lt;!-- raw HTML omitted -->&lt;/strong> # 要使用的 secret 对象名称&lt;/li>
&lt;/ul>
&lt;h2 id="containers-object--注入其他容器或修改-operator-生成的容器">containers: &amp;lt;[]Object&amp;gt; # 注入其他容器或修改 Operator 生成的容器。&lt;/h2>
&lt;p>这可用于允许将身份验证代理添加到 Prometheus pod 或更改 Operator 生成的容器的行为。 如果此处描述的容器共享相同的名称，则它们将修改操作员生成的容器，并且通过战略合并补丁进行修改。 当前的容器名称为：“ prometheus”，“ config-reloader”和“ thanos-sidecar”。 覆盖容器完全不在维护人员支持的范围之内，因此，您接受此行为可能随时中断，恕不另行通知。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>name: &lt;!-- raw HTML omitted -->&lt;/strong> # 指定要修改的容器名。支持的容器名为：prometheus、config-reloader、thanos-sidecar。若指定的名称不存在，则创建新的容器&lt;/li>
&lt;/ul>
&lt;h2 id="externalurl-string--为-prometheus-server-指定---webexternal-url-命令行标志的值">externalUrl: &lt;!-- raw HTML omitted --> # 为 prometheus Server 指定 &amp;ndash;web.external-url 命令行标志的值&lt;/h2>
&lt;h2 id="logformat-string--为-prometheus-server-指定---logformat-命令行标志的值">logFormat: &lt;!-- raw HTML omitted --> # 为 Prometheus Server 指定 &amp;ndash;log.format 命令行标志的值&lt;/h2>
&lt;h2 id="loglevel-string--为-prometheus-server-指定---loglevel-命令行标志的值">logLevel: &lt;!-- raw HTML omitted --> # 为 Prometheus Server 指定 &amp;ndash;log.level 命令行标志的值&lt;/h2>
&lt;h2 id="probenamespaceselector-object--选择指定名称空间下的-probe-资源">probeNamespaceSelector: &lt;!-- raw HTML omitted --> # 选择指定名称空间下的 Probe 资源&lt;/h2>
&lt;p>效果与 serviceMonitorNamespaceSelector 字段一样，只不过是与 probeSelector 字段配合使用。
**matchExpressions: &amp;lt;[]Object&amp;gt; **#
&lt;strong>matchLabels: &amp;lt;map[string]string&amp;gt;&lt;/strong> #&lt;/p>
&lt;h2 id="probeselector-object--通过-probe-资源发现待采集目标">probeSelector: &lt;!-- raw HTML omitted --> # 通过 Probe 资源发现待采集目标&lt;/h2>
&lt;p>为 Prometheus Server 发现想要抓取指标的目标。效果与 serviceMonitorSelector 字段一样，只不过是发现 Probe 资源。
**matchExpressions: &amp;lt;[]Object&amp;gt; **#
&lt;strong>matchLabels: &amp;lt;map[string]string&amp;gt;&lt;/strong> #&lt;/p>
&lt;h2 id="resources--与-pod-资源下的同名字段功能一样note该字段下的内容仅对-prometheus-容器生效">resources: # 与 pod 资源下的同名字段功能一样。Note:该字段下的内容仅对 prometheus 容器生效。&lt;/h2>
&lt;h2 id="retention-string--为-prometheus-server-指定---storagetsdbretentiontime-命令行标志">retention: &lt;!-- raw HTML omitted --> # 为 Prometheus Server 指定 &amp;ndash;storage.tsdb.retention.time 命令行标志&lt;/h2>
&lt;h2 id="servicemonitornamespaceselector-object--选择指定名称空间下的-servicemonitoring-资源">serviceMonitorNamespaceSelector: &lt;!-- raw HTML omitted --> # 选择指定名称空间下的 ServiceMonitoring 资源&lt;/h2>
&lt;p>通过[标签选择器](Label%20and%20Selector(标签和选择器).md 容器编排系统/1.API、Resource(资源)、Object(对象)/Label and Selector(标签和选择器).md)，匹配出指定的名称空间，该名称空间将会被 serviceMonitorSelector 字段使用，serviceMonitorSelector 将会从匹配到的名称空间中发现 ServiceMonitor 资源。
若该字段值为 &lt;code>nil&lt;/code>，则仅从 Prometheus 对象所在名称空间中发现 ServiceMonitor 资源。
**matchExpressions: &amp;lt;[]Object&amp;gt; **#
&lt;strong>matchLabels: &amp;lt;map[string]string&amp;gt;&lt;/strong> #&lt;/p>
&lt;h2 id="servicemonitorselector-object--通过-servicemonitor-资源发现待采集目标">serviceMonitorSelector: &lt;!-- raw HTML omitted --> # 通过 ServiceMonitor 资源发现待采集目标&lt;/h2>
&lt;p>为 Prometheus Server 发现想要抓取指标的目标。&lt;/p>
&lt;p>通过[标签选择器](Label%20and%20Selector(标签和选择器).md 容器编排系统/1.API、Resource(资源)、Object(对象)/Label and Selector(标签和选择器).md)，匹配出指定的 ServiceMontior 资源。serviceMonitorSelector 会从 probeNamespaceSelector 字段定义的名称空间中，查找 Service Monitor 资源，并获取其中的信息，以便转换为 Prometheus Server 的配置文件中 scrape_config 字段的内容。&lt;/p>
&lt;p>若该字段值为 &lt;code>{}&lt;/code>，则发现所有 ServiceMonitor 资源。否则可以根据匹配规则，选择指定的 ServiceMonitor。
&lt;strong>matchExpressions: &amp;lt;[]Object&amp;gt;&lt;/strong> # matchExpressions is a list of label selector requirements. The requirements are ANDed.
&lt;strong>matchLabels: &amp;lt;map[STRING]STRING&amp;gt;&lt;/strong> # matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is &amp;ldquo;key&amp;rdquo;, the operator is &amp;ldquo;In&amp;rdquo;, and the values array contains only &amp;ldquo;value&amp;rdquo;. The requirements are ANDed.&lt;/p>
&lt;h2 id="storage-object--定义-prometheus-的存储方式">storage: &lt;!-- raw HTML omitted --> # 定义 Prometheus 的存储方式。&lt;/h2>
&lt;h2 id="volumemounts-object--与-pod-资源下的同名字段功能一样">volumeMounts: &amp;lt;[]Object&amp;gt; # 与 pod 资源下的同名字段功能一样。&lt;/h2>
&lt;p>用于指定 volume 的挂载路径。Note：该字段内容只对 prometheus 容器生效&lt;/p>
&lt;h2 id="volmues-object--与-pod-资源下的同名字段功能一样用于指定一个-volume-">volmues: &amp;lt;[]Object&amp;gt; # 与 pod 资源下的同名字段功能一样。用于指定一个 volume 。&lt;/h2></description></item></channel></rss>