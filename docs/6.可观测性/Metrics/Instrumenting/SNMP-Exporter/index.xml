<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>SNMP Exporter on 断念梦的站点</title><link>https://desistdaydream.github.io/docs/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/Metrics/Instrumenting/SNMP-Exporter/</link><description>Recent content in SNMP Exporter on 断念梦的站点</description><generator>Hugo</generator><language>zh-cn</language><atom:link href="https://desistdaydream.github.io/docs/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/Metrics/Instrumenting/SNMP-Exporter/index.xml" rel="self" type="application/rss+xml"/><item><title>SNMP Exporter</title><link>https://desistdaydream.github.io/docs/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/Metrics/Instrumenting/SNMP-Exporter/SNMP-Exporter/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/Metrics/Instrumenting/SNMP-Exporter/SNMP-Exporter/</guid><description>概述 参考：
GitHub 项目，prometheus/snmp_exporter Snmp Exporter 通过 snmp 采集监控数据，并转换成[ OpenMetrics 格式](&amp;lt;/docs/6.可观测性/监控系统/监控系统概述/HTTP(新监控标准).md&amp;raquo;)的指标。
在这个项目中，有两个组件，
Exporter(导出器) # 通过 snmp 抓去指标数据并转换成 OpenMetrics 格式 Generator(生成器) # 生成 Exporter 的配置文件。 Exporter(导出器) snmp_exporter 启动后默认监听在 9116 端口上。snmp_exporter 会根据 snmp.yml 配置文件中的配置规则抓取 snmp 数据并转换成 Metrics 格式的数据。
Prometheus Server 抓取 metircs 的 http 请求样例： http://IP:PORT/snmp?module=if_mib&amp;amp;target=TargetIP # 获取 TargetIP 上的 snmp 信息，并转换成 metrics 格式，其中 module=if_mib 是可省的，若不指定 module，则抓取所有 module。
snmp exporter 源码简单解析
// 这个结构体实现了 prometheus.Collector 接口 type collector struct { // ......略 } // 采集 Metrics 的主要逻辑在这里，这里省略了很多不相关的代码 func (c collector) Collect(ch chan&amp;lt;- prometheus.</description></item><item><title>配置详解</title><link>https://desistdaydream.github.io/docs/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/Metrics/Instrumenting/SNMP-Exporter/%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/Metrics/Instrumenting/SNMP-Exporter/%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3/</guid><description>概述 参考:
GitHub 项目，prometheus/snmp_exporter - generator generator.yml 文件详解 generator.yml 文件提供一个模块列表。 最简单的模块只需要具有一个名称和一组要 walk 的 OID
# 配置认证信息 auths: AuthName: # 自定义的认证名称名称。用于在 curl # SNMP 版本，默认为 2。 # 版本1使用 GETNEXT 方法发送 udp 请求、2和3版本使用 GETBULK 方法发送 udp 请求 version: 2 # 用于 SNMP 的 v1 和 v2 版本的认证信息 # 设置团体名字. 默认为&amp;#34;public&amp;#34;. community: public # SNMP 的 v3 版本的认证配置与 1，2 都不同，且更为复杂 # v3 has different and more complex settings. # Which are required depends on the security_level.</description></item><item><title>应用实例</title><link>https://desistdaydream.github.io/docs/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/Metrics/Instrumenting/SNMP-Exporter/%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/Metrics/Instrumenting/SNMP-Exporter/%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B/</guid><description>generator.yml 文件示例 H3C 这是从 H3C 的 HDM 中提取到的所有序列
modules: h3c_mib: walk: - hh3cHealthInfo - hh3cPowerInfo - hh3cFansInfo - hh3cMemDetailInfoTable - hh3cTempSensorName - hh3cTempSensorReading - hh3cTempSensorSubStatus version: 2 auth: community: public if_mib: walk: [sysUpTime, interfaces, ifXTable] lookups: - source_indexes: [ifIndex] lookup: ifAlias - source_indexes: [ifIndex] # Uis OID to avoid conflict with PaloAlto PAN-COMMON-MIB. lookup: 1.3.6.1.2.1.2.2.1.2 # ifDescr - source_indexes: [ifIndex] # Use OID to avoid conflict with Netscaler NS-ROOT-MIB. lookup: 1.</description></item></channel></rss>