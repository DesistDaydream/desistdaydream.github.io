<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Net-SNMP on 断念梦的站点</title><link>https://desistdaydream.github.io/docs/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/Metrics/Net-SNMP/</link><description>Recent content in Net-SNMP on 断念梦的站点</description><generator>Hugo</generator><language>zh-cn</language><atom:link href="https://desistdaydream.github.io/docs/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/Metrics/Net-SNMP/index.xml" rel="self" type="application/rss+xml"/><item><title>Net-SNMP</title><link>https://desistdaydream.github.io/docs/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/Metrics/Net-SNMP/Net-SNMP/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/Metrics/Net-SNMP/Net-SNMP/</guid><description>概述 参考：
GitHub 项目，net-snmp/net-snmp/ 官网 [!Attention] 官网大量页面错误 Exception encountered, of type &amp;ldquo;mysqli_sql_exception&amp;rdquo;，e.g. https://www.net-snmp.org/wiki/,
Net-SNMP 是实现 SNMP(传统监控标准) 的工具和库的集合。包含如下内容：
net-snmp # SNMP 代理，用于采集设备的 SNMP 信息。包含两个守护程序。 net-snmp-utils # 是一组工具的集合，包括下面这些命令行工具： snmpwalk # 获取 SNMP 信息，可以根据 OID 获取指定 OID 的 SNMP 信息 snmptranslate # 转换 OID 的两种格式 encode_keychange、snmpbulkget、snmpbulkwalk、snmpdelta、snmpdf、snmpget、snmpgetnext、snmpinform、snmpnetstat、snmpset、snmpstatus、snmptable、snmptest、snmptls、snmptrap、snmpusm、snmpvacm net-snmp 是一种可以通过 snmp 协议来实现基础监控功能的守护程序。包含两个守护程序以及几个命令行工具
snmpd # 用于响应请求的 SNMP 代理。说白了提供 SNMP 数据的程序。监听一个端口(默认监听 161/udp)，当别人向 161 发送 SNMP 请求时，snmpd 会将采集到的数据发送给对方。 snmptrapd # 用于接收 SNMP 通知的通知接收器 agentxtrap # net-snmp-create-v3-user # 创建 v3 用户 snmpconf # 用于生成配置文件 Net-SNMP 安装 Net-SNMP 提供了各种安装文件，对于 Linux 系统来说，直接使用 yum、apt 等工具安装即可</description></item><item><title>Net-SNMP 配置详解</title><link>https://desistdaydream.github.io/docs/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/Metrics/Net-SNMP/Net-SNMP-%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/Metrics/Net-SNMP/Net-SNMP-%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3/</guid><description>概述 参考：
snmpd.conf 文件 snmp.conf 文件 mibdirs +/usr/share/snmp/mibs/h3c # 添加 MIB 目录，以便 snmp 工具可以从这些目录中读取 MIB 文件。
mibs +HH3C-OID-MIB # 添加 snmp 工具可以 walk 等操作可以控制的 OID。
mibs +HH3C-SERVER-AGENT-MIB
mibs +HH3C-SERVER-TRAP-MIB</description></item><item><title>net-snmp-utils</title><link>https://desistdaydream.github.io/docs/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/Metrics/Net-SNMP/net-snmp-utils/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/Metrics/Net-SNMP/net-snmp-utils/</guid><description>概述 参考：
官方文档，手册 snmpwalk 与 snmpget snmpwalk 与 snmpget 使用 snmp 协议的 GETNEXT 请求，向 SNMP 代理发送查询请求，以便获取 SNMP 数据。
snmpget 获取指定 OID 的数据 snmpwalk 可以获取大量 OID 的数据 关联文件与配置 /etc/snmp/snmp.conf # snmpwalk 与 snmpget 运行时配置文件。若不存在则手动创建
/usr/local/share/snmp/mibs # MIB 文件的默认路径。这里现阶段包含 66 个 MIB 文件。
net-snmp-config --default-mibdirs 命令可以列出工具在使用中会读取 MIB 文件的默认路径，包括如下几个：
注意，CentOS 和 Ubuntu 的路径可能不相同。PS: 这种老程序是真滴坑 $HOME/.snmp/mibs /usr/share/snmp/mibs /usr/share/snmp/mibs/iana /usr/share/snmp/mibs/ietf 添加自定义 MIB 在 /etc/snmp/snmp.conf 文件中添加如下内容
mibdirs +/root/.snmp/mibs/h3c 在 /root/.snmp/mibs/h3c 目录下添加 MIB 文件后，snmpwalk 就可以获取到第三方 MIB 信息。</description></item><item><title>SNMP 采集第三方 MIB 文件定义的设备信息</title><link>https://desistdaydream.github.io/docs/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/Metrics/Net-SNMP/SNMP-%E9%87%87%E9%9B%86%E7%AC%AC%E4%B8%89%E6%96%B9-MIB-%E6%96%87%E4%BB%B6%E5%AE%9A%E4%B9%89%E7%9A%84%E8%AE%BE%E5%A4%87%E4%BF%A1%E6%81%AF/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/Metrics/Net-SNMP/SNMP-%E9%87%87%E9%9B%86%E7%AC%AC%E4%B8%89%E6%96%B9-MIB-%E6%96%87%E4%BB%B6%E5%AE%9A%E4%B9%89%E7%9A%84%E8%AE%BE%E5%A4%87%E4%BF%A1%E6%81%AF/</guid><description>概述 参考：
https://lvii.github.io/server/2013-07-05-net-snmp-get-info-from-third-custumed-mib-file/ 厂里机房搞来 PDU 机柜电源插座，这个 bootbox 可以采集一些机柜温度，以及各个插座的电流功率啥的。
要用 SNMP 协议来获取这些信息，因为是第三方设备，要根据厂商的 MIB 文件中定义的 OID 来解析相关字段。
下面开始介绍怎么折腾：
把 MIB 放到系统 mibdirs 路径 让 net-snmp 工具自动加载 MIB 文件 用 snmptranslate 解析 MIB 文件中的 OID 用 snmpwalk 或 snmpget 采集对应 OID 字段信息 准备一下 snmp 相关的命令行工具，要在 CentOS 装上下面几个软件包：
rpm command net-snmp snmpd 服务 net-snmp-libs 系统常用的 MIBS 文件库 net-snmp-utils 提供 snmpget / snmpwalk / snmptranslate 等采集工具 net-snmp-devel 提供 net-snmp-config 命令行工具 修改 MIB 文件路径 参考 net-snmp 文档: 「Where should I put my MIB files?</description></item><item><title>问题实例</title><link>https://desistdaydream.github.io/docs/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/Metrics/Net-SNMP/%E9%97%AE%E9%A2%98%E5%AE%9E%E4%BE%8B/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/Metrics/Net-SNMP/%E9%97%AE%E9%A2%98%E5%AE%9E%E4%BE%8B/</guid><description>概述 参考：
No Such Object available on this agent at this OID 或 No more variables left in this MIB View (It is past the end of the MIB tree) 本地测试：snmpwalk -v 2c -cpublic localhost 1.3.6.1.2.1.25.3.3.1.1
远程测试：snmpwalk -v 2c -c public 192.168.1.172 1.3.6.1.2.1.25.3.3.1.1
如果本地测试 ok，远程测试出现如下报错：
No Such Object available on this agent at this OID 或 No more variables left in this MIB View (It is past the end of the MIB tree)</description></item></channel></rss>