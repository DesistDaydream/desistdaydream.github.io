<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>断念梦的站点 – 监控系统</title><link>https://desistdaydream.github.io/docs/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F/</link><description>Recent content in 监控系统 on 断念梦的站点</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><atom:link href="https://desistdaydream.github.io/docs/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs: 监控系统概述</title><link>https://desistdaydream.github.io/docs/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F/%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F/%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0/</guid><description/></item><item><title>Docs: Net-SNMP</title><link>https://desistdaydream.github.io/docs/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F/Net-SNMP/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F/Net-SNMP/</guid><description/></item><item><title>Docs: Prometheus</title><link>https://desistdaydream.github.io/docs/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F/Prometheus/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F/Prometheus/</guid><description/></item><item><title>Docs: Instrumenting</title><link>https://desistdaydream.github.io/docs/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F/Instrumenting/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F/Instrumenting/</guid><description/></item><item><title>Docs: Alertmanager</title><link>https://desistdaydream.github.io/docs/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F/Alertmanager/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F/Alertmanager/</guid><description/></item><item><title>Docs: dell硬件监控OMSA</title><link>https://desistdaydream.github.io/docs/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F/dell%E7%A1%AC%E4%BB%B6%E7%9B%91%E6%8E%A7OMSA/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/6.%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F/dell%E7%A1%AC%E4%BB%B6%E7%9B%91%E6%8E%A7OMSA/</guid><description>
&lt;h1 id="omsa全称-openmanage-server-administrator是戴尔公司自主研发的-it-系统管理解决方案">OMSA（全称 Openmanage Server Administrator),是戴尔公司自主研发的 IT 系统管理解决方案&lt;a class="td-heading-self-link" href="#omsa%e5%85%a8%e7%a7%b0-openmanage-server-administrator%e6%98%af%e6%88%b4%e5%b0%94%e5%85%ac%e5%8f%b8%e8%87%aa%e4%b8%bb%e7%a0%94%e5%8f%91%e7%9a%84-it-%e7%b3%bb%e7%bb%9f%e7%ae%a1%e7%90%86%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88" aria-label="Heading self-link">&lt;/a>&lt;/h1>
&lt;p>&lt;a href="http://linux.dell.com/">http://linux.dell.com/&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/gknv4x/1616067497715-90aa8503-f2c3-4436-ac53-560ef9f66d5f.jpeg" alt="">&lt;/p>
&lt;h2 id="omsa-的安装">OMSA 的安装&lt;a class="td-heading-self-link" href="#omsa-%e7%9a%84%e5%ae%89%e8%a3%85" aria-label="Heading self-link">&lt;/a>&lt;/h2>
&lt;h3 id="自动安装">自动安装&lt;a class="td-heading-self-link" href="#%e8%87%aa%e5%8a%a8%e5%ae%89%e8%a3%85" aria-label="Heading self-link">&lt;/a>&lt;/h3>
&lt;p>&lt;a href="https://linux.dell.com/repo/hardware/dsu/">https://linux.dell.com/repo/hardware/dsu/&lt;/a>&lt;/p>
&lt;ol>
&lt;li>配置存储库
&lt;ol>
&lt;li>curl -O &lt;a href="https://linux.dell.com/repo/hardware/dsu/bootstrap.cgi">https://linux.dell.com/repo/hardware/dsu/bootstrap.cgi&lt;/a>&lt;/li>
&lt;li>bash bootstrap.cgi&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>yum install srvadmin-all.x86_64&lt;/li>
&lt;/ol>
&lt;p>Note：&lt;/p>
&lt;ol>
&lt;li>srvadmin-base # 代理程序，可以生成 snmp 信息&lt;/li>
&lt;li>srvadmin-server-cli # 命令行客户端，可以通过命令行查看硬件信息&lt;/li>
&lt;li>srvadmin-storage-cli # 存储资源的命令行客户端，不安装这个则无法获取 raid 和硬盘的数据&lt;/li>
&lt;/ol>
&lt;p>下面是使用 yum 安装 OMSA 的 repo 文件&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>~&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>&lt;span style="color:#8f5902;font-style:italic"># cat /etc/yum.repos.d/DELL-OMSA.repo&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>dell-system-update_independent&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">name&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dell-system-update_independent
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">baseurl&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>https://linux.dell.com/repo/hardware/dsu/os_independent/
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">gpgcheck&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">gpgkey&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>https://linux.dell.com/repo/hardware/dsu/public.key
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> https://linux.dell.com/repo/hardware/dsu/public_gpg3.key
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">enabled&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">exclude&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dell-system-update*.i386
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>dell-system-update_dependent&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">name&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dell-system-update_dependent
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">mirrorlist&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>https://linux.dell.com/repo/hardware/dsu/mirrors.cgi?osname&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>el&lt;span style="color:#000">$releasever&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;amp;&lt;/span>&lt;span style="color:#000">basearch&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#000">$basearch&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;amp;&lt;/span>&lt;span style="color:#000">native&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">gpgcheck&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">gpgkey&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>https://linux.dell.com/repo/hardware/dsu/public.key
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> https://linux.dell.com/repo/hardware/dsu/public_gpg3.key
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">enabled&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考文章：&lt;a href="http://www.madown.com/2017/05/23/81/">http://www.madown.com/2017/05/23/81/&lt;/a>&lt;/p>
&lt;h3 id="手动安装">手动安装&lt;a class="td-heading-self-link" href="#%e6%89%8b%e5%8a%a8%e5%ae%89%e8%a3%85" aria-label="Heading self-link">&lt;/a>&lt;/h3>
&lt;p>&lt;a href="https://www.dell.com/support/home/">https://www.dell.com/support/home/&lt;/a>去该网站输入主机号查询，然后根据关键字搜索 OMSA 并下载
&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/gknv4x/1616067497724-a84a9901-d1a0-4c18-9198-303c071c9960.jpeg" alt="">&lt;/p>
&lt;ol>
&lt;li>解压已下载的安装包
&lt;ol>
&lt;li>mkdir dell-omsa&lt;/li>
&lt;li>tar -zxvf OM-SrvAdmin-Dell-Web-LX-9.3.0-3465_A00.tar -C dell-omsa #&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>安装 rpm 包
&lt;ol>
&lt;li>cd dell-omsa/linux/RPMS/supportRPMS/srvadmin/RHEL7/x86_64&lt;/li>
&lt;li>yum localinstall *.rpm&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;p>将 dell-r740.tar.gz 拷贝到/root/Download 目录下并执行以下脚本&lt;/p>
&lt;h2 id="omsa-的配置与使用">OMSA 的配置与使用&lt;a class="td-heading-self-link" href="#omsa-%e7%9a%84%e9%85%8d%e7%bd%ae%e4%b8%8e%e4%bd%bf%e7%94%a8" aria-label="Heading self-link">&lt;/a>&lt;/h2>
&lt;p>安装 dell 监控 openManager 相关组件完成后，会在/opt/dell/*目录下生成配置文件与可执行文件&lt;/p>
&lt;ul>
&lt;li>配置 openManager&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/gknv4x/1616067497704-782c72fb-2dcf-4422-9654-b71a7c89d1eb.jpeg" alt="">&lt;/p>
&lt;ul>
&lt;li>/opt/dell/srvadmin/sbin/srvadmin-services.sh start # 启动 openManger
&lt;ul>
&lt;li>该脚本会通过 systemd 启动三个服务&lt;/li>
&lt;li>instsvcdrv #&lt;/li>
&lt;li>dataeng #&lt;/li>
&lt;li>dsm_om_connsvc # web 控制台&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>/opt/dell/srvadmin/sbin/srvadmin-services.sh enable # 设置开机自启 openManager&lt;/li>
&lt;li>systemctl stop dsm_om_connsvc # 关闭 openManager 的 web 服务&lt;/li>
&lt;li>systemctl disable dsm_om_connsvc # 将 openManager 的 web 服务开机自启关闭&lt;/li>
&lt;li>systemctl restart snmpd # 重启 snmp 服务。由于安装 openManager 会在 snmpd 的配置文件中写入内容，所以需要重启 snmpd 服务使得该配置生效&lt;/li>
&lt;li>在 wiseman 上添加相关的 dell 硬件监控。效果如图，在主机的模板里添加 dell server 模板&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/gknv4x/1616067497780-3afd659e-d460-4c2b-8d66-1f9a3c67890a.jpeg" alt="">&lt;/p>
&lt;h1 id="命令行工具使用说明">命令行工具使用说明&lt;a class="td-heading-self-link" href="#%e5%91%bd%e4%bb%a4%e8%a1%8c%e5%b7%a5%e5%85%b7%e4%bd%bf%e7%94%a8%e8%af%b4%e6%98%8e" aria-label="Heading self-link">&lt;/a>&lt;/h1>
&lt;h2 id="omreport-command">omreport COMMAND&lt;a class="td-heading-self-link" href="#omreport-command" aria-label="Heading self-link">&lt;/a>&lt;/h2>
&lt;p>在任何时候都可以使用 omreport -?来获取命令帮助以查看都有哪些可用的 COMMAND，例如：omreport -?、omreport chassis -?等
COMMAND&lt;/p>
&lt;ol>
&lt;li>about Product and version properties.&lt;/li>
&lt;li>licenses Displays the digital licenses of the installed hardware devices.&lt;/li>
&lt;li>preferences Report system preferences.&lt;/li>
&lt;li>system System component properties.&lt;/li>
&lt;li>chassis 机架组件的属性。i.e.基本硬件的信息。Chassis component properties.&lt;/li>
&lt;li>storage # 显示存储组件的属性&lt;/li>
&lt;/ol>
&lt;h2 id="omreport-storage">omreport storage&lt;a class="td-heading-self-link" href="#omreport-storage" aria-label="Heading self-link">&lt;/a>&lt;/h2>
&lt;p>EXAMPLE&lt;/p>
&lt;ol>
&lt;li>omreport storage pdisk controller=0 #&lt;/li>
&lt;/ol></description></item></channel></rss>