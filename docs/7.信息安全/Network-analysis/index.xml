<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Network analysis on 断念梦的站点</title><link>https://desistdaydream.github.io/docs/7.%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/Network-analysis/</link><description>Recent content in Network analysis on 断念梦的站点</description><generator>Hugo</generator><language>zh-cn</language><atom:link href="https://desistdaydream.github.io/docs/7.%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/Network-analysis/index.xml" rel="self" type="application/rss+xml"/><item><title>Network analysis</title><link>https://desistdaydream.github.io/docs/7.%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/Network-analysis/Network-analysis/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/7.%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/Network-analysis/Network-analysis/</guid><description>概述 参考：
Network analysis(网络分析) 依赖很多基础的流量处理功能以组成完整的系统
Port mirroring # 流量镜像是网络分析的基础。没有端口镜像将流量镜像出来，那么所有的流量分析程序都要使用原始流量，这是绝对不可接受的。除了具体的流量封堵外，任何分析，都应该使用镜像出来的流量。 etc. 最佳实践 基于 DPI 的网络分析 在网络分析系统中，DPI 设备除了数据包的检查与处置外，通常还可能具有 Port mirroring(端口镜像)、Fiber-optic splitter、etc. 相关的流量复制能力，这些被 DPI 复制的流量将会送到 Network packet broker 设备中以进行聚合、过滤，然后再转发给后端的业务系统。这是一种常见的网络流量分析系统，拿到了流量就相当于有了数据，至于数据如何用，根据具体业务情况而定。
这些业务系统通常包括
僵木蠕监测与处置系统 流控系统 话单系统 流量深度分析系统 etc.</description></item><item><title>Port mirroring</title><link>https://desistdaydream.github.io/docs/7.%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/Network-analysis/Port-mirroring/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/7.%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/Network-analysis/Port-mirroring/</guid><description>概述 参考：
Wiki, Port mirroring Port mirroring(端口镜像) 是交换机上的一个功能，可以将一个端口上经过的所有流量复制一份到另一个端口上。这种方式通常用于需要监控网络流量的环境中，原始流量不受影响，被复制的流量发往后端设备以进一步分析，比如 IDS(入侵监测系统)、etc. 。Cisco 公司生成的交换机上的 Port mirroring 功能称为 Switched Port Analyzer(简称 SPAN) 或 Remote Switched Port Analyzer(简称 RSPAN)，有时候称为 Span Port。
网络工程师或管理员使用端口镜像来分析和调试数据或诊断网络上的错误。它可以帮助管理员密切关注网络性能并在出现问题时向他们发出警报。它可用于镜像单个或多个接口上的入站或出站流量（或两者）。
随着网络分析需求的增加，很多时候也会把 Port mirroring 形容成流量镜像的功能，只有具备了 Port mirroring 的系统，才能真正实现 Network analysis。
SPAN Switched Port Analyzer(简称 SPAN)</description></item><item><title>DPI</title><link>https://desistdaydream.github.io/docs/7.%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/Network-analysis/DPI/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/7.%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/Network-analysis/DPI/</guid><description>概述 参考：
Wiki, Deep packet inspection Deep packet inspection(深度数据包检测，简称 DPI) 是一种用于 Network analysis(网络分析) 的 行为、技术、方法，它详细检查计算机网络上传输的数据包，并可能根据情况采取 发送警报、阻止数据包传输、重新路由、记录(或者说镜像)流量 等行动。DPI 的这些功能通常用于 确定应用程序行为基线、分析网络使用情况、排除网络性能故障、确保数据格式正确、检查恶意代码、窃听和互联网审查、以及其他目的。
可以通过 软件、硬件、软硬结合 多种方式实现 DPI。
支持 DPI 的设备或程序能够查看 OSI 模型的第 2 层和第 3 层以外的情况。在某些情况下，可以调用 DPI 来查看 OSI 模型的第 2-7 层。这包括标头和数据协议结构以及消息的有效负载。当设备根据 OSI 模型第 3 层之外的信息查找或采取其他操作时，将调用 DPI 功能。 DPI 可以识别的数据包特征又很多：
协议 HTTP 请求类型 数据包中的数据特征 etc. IP数据包有多个报头；网络设备只需要使用其中第一个（IP 标头）即可正常操作，但使用第二个标头（例如 TCP 或 UDP）通常被认为是 Stateful packet inspection(浅层数据包检查)（通常称为状态数据包检查）
用白话说：DPI 不是一种特定的技术或协议，而是一种处理流量的方式。
DPI 始于 20 世纪 90 年代。早期的 DPI 实现有：
RMON Sniffer Wireshark etc.</description></item><item><title>Bypass swtich</title><link>https://desistdaydream.github.io/docs/7.%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/Network-analysis/Bypass-swtich/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/7.%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/Network-analysis/Bypass-swtich/</guid><description>概述 参考：
Wiki, Bypass switch Bypass switch(旁路交换机) 是一种硬件设备，可以与安全设备并联并串联到网络链路中，为安全设备提供 fail-safe access(故障时可安全访问) 的能力。
tips: Bypass switch 早期也有 Bypass tap(旁路分路器) 的含义，具有一部分 Network tap 的能力，后来随着发展，Bypass 仅仅作为提供高可用所用，Tap 能力由更专业的设备实现。
Bypass tap 通常至少有 4 个端口。
A 和 B 两个端口串联，且中间不经过任何电路，Bypass tap 本身不运行的情况下也可以保证 A 到 B 之间的链路畅通。当安全设备正常运行时，A 到 B 的连接是断开的； C 和 D 是用来监控安全设备的端口，安全设备正常运行时，流量通过 C 和 D 端口，相当于将安全设备串联进网络中。 当检测到安全设备出现异常时，将会切断 C 和 D 的端口，将流量转交给 A 和 B 以保证网络链路上的数据不间断。 通常来说，这两种情况可以用两种模式来概括
Normal mode # 流量经过 Bypass 的 C 与 D 端口，到达其他设备后，再发送到下一跳的设备 有的地方也称为 控制模式 Bypass mode # 流量经过 Bypass 的 A 与 B 端口，直接到达下一跳的设备 有的地方也称为 直通模式 在中文环境中也有的将 Bypass tap 称为 Optical swap(光切换设备，Optiswap)、光开关、etc.</description></item><item><title>Network tap</title><link>https://desistdaydream.github.io/docs/7.%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/Network-analysis/Network-tap/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/7.%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/Network-analysis/Network-tap/</guid><description>概述 参考：
Wiki, Network tap Network tap(网络分流器) 是一种通过类似 Port mirroring 技术实现的流量监听方式。实现了 Network tap 能力的硬件设备可以用来监视本地网络上的事件。Network tap 设备一般至少有 3 个端口：A 端口、B 端口、monitor(监听) 端口。Network tap 可以让数据在 A 与 B 之间的传输实时无阻碍得通过，同时还将相同的数据复制到 monitor 端口，从而使得第三方分析数据。
[!tips] tap 本身有窃听的意思，Network tap 本质上可以算是 网络窃听器、网络监听器。厂商们为了更好的售卖产品而美化了该词的含义，而且也根据 Tap 设备具体的功能（复制流量分到另一个端口就相当于分流了），把 tap 的含义改为了分流。还扩展了一下 tap 这个词成 terminal access point(终端接入点)
Network tap 在狭义上通常只有 1 分 多 的能力，适用在简单的流量不大的网络环境中，若是在流量巨大且复杂的网络中，想实现 多 分 多的能力（汇聚与分流），则需要使用 Network packet broker 技术。
Network tap 与 Network packet broker Network tap 通常是在小流量场景中串接进链路中；而 Network packet broker 则通常是在大流量、复杂的网络场景中，并接到链路上。</description></item><item><title>Network packet broker</title><link>https://desistdaydream.github.io/docs/7.%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/Network-analysis/Network-Packet-Broker/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/7.%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/Network-analysis/Network-Packet-Broker/</guid><description>概述 参考：
Wiki, Data monitoring switch 知乎，什么是TAP分流器/交换机，有哪些品牌 Network Packet Broker(网络数据包代理，简称 NPB) 是一种比 Network tap 更强大的流量处置技术，实现了 NPB 的设备接收来自大量链路上的流量，将其汇聚在设备内部处理（e.g. 过滤、etc.）后，再将流量分发给另一侧的其他设备。这种行为也可以称为汇聚分流，对应的，实现了 NPB 的设备可以称为 汇聚分流设备。
Network tap 通常只能是 1 对 2 让流量复制一份；而 NPB 可以实现 1 对 多，多 对 多，且除了基本的窃听流量（i.e. 复制流量）功能外，还可以实现多种多样的流量处理能力
还有一些词汇也是用来描述实现 NPB 功能的设备：Data monitoring switch(数据监控交换机)、Data access switch(数据访问交换机)、Tool aggregator(工具聚合器)、Net tool optimizer(网络工具优化器)、Distributed filter tap(分布式过滤器)、Network Traffic Aggregator(网络流量聚合器)、Aggregation Taps(聚合)
NPB 设备通常是作为 旁路设备 以 并接 的方式接入到主链路中，接收的是来自 DPI、其他 NPB 设备、etc. 的流量。
NPB 内部的核心能力是对来自多条链路的流量实现了 同源同宿，保证多条链路的流量不会混乱。NPB 对接收到的大量流量进行汇聚、过滤、分发，NPB 并不需要串联进进链路中执行具体的像安全设备似的丢弃报文、阻断流量相关的任务。主要是基于如下需求产生的
汇聚分流 参考：
知乎，TAP交换机初探 知乎，谈谈TAP交换机的架构 TAP 交换机其实不是一个合适的叫法，但行业内大部分人都习惯于这个叫法。并且，在国内它还有很多其他叫法，比如：镜像交换机、TAP分流器、流量分流器、流量汇聚分流器、NPB、TAP 等等，一般情况之下，讲的是同一个东西。实际上，这个玩意是从国外传到国内的，由于语言上、理解上、厂商引导上的差异，造成了国内多种不同的叫法。</description></item><item><title>NetFlow</title><link>https://desistdaydream.github.io/docs/7.%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/Network-analysis/NetFlow/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/7.%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/Network-analysis/NetFlow/</guid><description>概述 参考：
Wiki, NetFlow NetFlow 是 1996 年左右在 Cisco 路由器上引入的一项功能，它能够在 IP 网络流量进入或退出接口时收集该流量。通过分析 NetFlow 提供的数据，网络管理员可以确定流量的来源和目的地、服务类别以及拥塞原因等信息。
NetFlow 通常由三个部分组成
Flow exporter(流导出器) # 将数据包聚合成流，并将流记录导出到一个或多个流收集器。 Flow collector(流收集器) # 负责从流导出器接收的流数据的接收、存储和预处理。 Analysis application(分析程序) # 在入侵检测或流量分析的情况下分析接收到的流数据。 截至 2012 年，大多数防火墙和基于软件的 IP 路由器仍在使用类似于 NetFlow 交换的技术。例如 Linux 使用的 Netfilter 框架的 conntrack 功能。
NetFlow 与 DPI 下面回答来自 ChatGPT 3.5
NetFlow（网络流量流）和 DPI（深度数据包检测）是两种不同的网络监测和分析技术，它们在某些方面有联系，但主要关注的方面有所不同。
NetFlow:
NetFlow是一种网络流量分析技术，通常由Cisco开发和使用。 它通过在网络设备（如路由器和交换机）上捕获和记录网络流量的摘要信息来工作。这些信息包括源IP地址、目标IP地址、端口号、协议等。 NetFlow生成的报告提供了对流量模式、流量源和目标等的高层次摘要，适用于流量分析和网络性能监测。 DPI:
DPI是深度数据包检测的缩写，是一种更为深入地分析网络数据包内容的技术。 DPI不仅关注流量的源和目标，还深入解析数据包的内容，可以识别应用程序、协议、用户行为等。 DPI通常用于实时检测网络中的应用层协议，以便对网络流量进行更深入的分析，包括识别特定应用程序或服务，检测潜在的威胁和执行策略。 联系和区别：
联系： NetFlow和DPI都提供了对网络流量的分析能力，但关注的层次和信息的深度不同。 在一些情况下，可以将两者结合使用，通过NetFlow提供的摘要信息定位特定流量，然后使用DPI深入分析该流量的内容。 区别： NetFlow更专注于流量的高层次概要，而DPI更关注深入的数据包内容分析。 NetFlow通常用于流量监测、性能优化和容量规划，而DPI主要用于安全分析、应用层识别和用户行为分析。 分类 Wiki 中的分类: Computer network analysis，还分类下还包括 Network analyers，这里有 DPI</description></item></channel></rss>