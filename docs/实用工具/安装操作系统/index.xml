<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>断念梦 – 安装操作系统</title><link>https://desistdaydream.github.io/docs/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E5%AE%89%E8%A3%85%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/</link><description>Recent content in 安装操作系统 on 断念梦</description><generator>Hugo -- gohugo.io</generator><atom:link href="https://desistdaydream.github.io/docs/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E5%AE%89%E8%A3%85%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs: 安装操作系统</title><link>https://desistdaydream.github.io/docs/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E5%AE%89%E8%A3%85%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%AE%89%E8%A3%85%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E5%AE%89%E8%A3%85%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%AE%89%E8%A3%85%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/</guid><description>
&lt;h1 id="概述">概述&lt;/h1>
&lt;blockquote>
&lt;p>参考：&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://en.wikipedia.org/wiki/Windows_Preinstallation_Environment">Wiki，Windows_Preinstallation_Environment&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://en.wikipedia.org/wiki/Live_USB">Wiki，Live_USB&lt;/a>&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;p>我们想要安装操作系统，通常都需要将一个 &lt;strong>Bootable Media(启动介质)&lt;/strong> 放到 &lt;strong>Operating System Installation Media(操作系统安装介质)&lt;/strong> 中，一般使用介质制作工具(UltraISO、Rufus 等)来实现。这个&lt;strong>操作系统的安装介质&lt;/strong>可以是 &lt;strong>U盘、光盘、网络存储等&lt;/strong>。&lt;/p>
&lt;p>之后，将需要安装系统的计算机与介质连接，这个介质将会被加载到内存中，从而提供一个临时的环境(这个环境有可能会类似操作系统)，人类在这个环境中可以访问计算机硬件资源和文件系统的环境，从而利用介质中的安装程序，将操作系统安装到计算机中。毕竟，只要能访问到硬件资源了了，剩下的就是将文件写入到硬盘中即可。&lt;/p>
&lt;p>除了最基本的启动介质，很多操作系统的发行商还会提供一个具有微型系统能力的启动介质，这种介质除了最基本的安装能力外，还提供了很多额外的工具，以便可以修复、管理计算机，或者修复操作系统。Windows 和 Linux 对这种启动介质有各自的称呼&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Preinstallation Environment&lt;/strong> # Windows 微型系统的称呼。简称 WinPE&lt;/li>
&lt;li>&lt;strong>Live&lt;/strong> # Linux 微型系统的称呼。比如 Ubuntu Live&lt;/li>
&lt;/ul>
&lt;h1 id="ghost">Ghost&lt;/h1>
&lt;h2 id="概述-1">概述&lt;/h2>
&lt;blockquote>
&lt;p>参考：&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://en.wikipedia.org/wiki/Ghost_(disk_utility)">Wiki,Ghost(disk utility)&lt;/a>&lt;/li>
&lt;/ul>
&lt;/blockquote></description></item><item><title>Docs: UltraISO</title><link>https://desistdaydream.github.io/docs/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E5%AE%89%E8%A3%85%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/ISO%E6%96%87%E4%BB%B6%E4%B8%8E%E5%8F%AF%E5%90%AF%E5%8A%A8U%E7%9B%98%E5%88%B6%E4%BD%9C%E5%B7%A5%E5%85%B7/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E5%AE%89%E8%A3%85%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/ISO%E6%96%87%E4%BB%B6%E4%B8%8E%E5%8F%AF%E5%90%AF%E5%8A%A8U%E7%9B%98%E5%88%B6%E4%BD%9C%E5%B7%A5%E5%85%B7/</guid><description>
&lt;h1 id="rufus">Rufus&lt;/h1>
&lt;blockquote>
&lt;p>参考：&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://rufus.ie/">官网&lt;/a>&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h1 id="ultraiso">UltraISO&lt;/h1>
&lt;blockquote>
&lt;p>参考：&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.ultraiso.com/">官网&lt;/a>&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;p>UltraISO 是一个运行在Microsoft Windows平台上的用来创建、修改和转换ISO文件的软件。&lt;/p>
&lt;p>官方似乎没有 Portable(便携版)~~ o(╯□╰)o&lt;/p>
&lt;h2 id="将-iso-文件写到-u-盘">将 ISO 文件写到 U 盘&lt;/h2>
&lt;ul>
&lt;li>插入 U 盘&lt;/li>
&lt;li>打开 iso 文件。&lt;/li>
&lt;li>“写入硬盘映像”
&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/0-picgo/20230214180238.png" alt="image.png">&lt;/li>
&lt;li>在”硬盘驱动器“栏选择想要写入数据的 U 盘，点击“写入“&lt;/li>
&lt;/ul></description></item><item><title>Docs: Clonezilla</title><link>https://desistdaydream.github.io/docs/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E5%AE%89%E8%A3%85%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Clonezilla/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E5%AE%89%E8%A3%85%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Clonezilla/</guid><description>
&lt;h2 id="概述">概述&lt;/h2>
&lt;blockquote>
&lt;p>参考：&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://clonezilla.org/">官网&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://zhuanlan.zhihu.com/p/354584111">知乎，使用再生龙CloneZilla进行Linux系统的镜像完全封装和还原&lt;/a>&lt;/li>
&lt;li>其他实践：
&lt;ul>
&lt;li>&lt;a href="https://blog.csdn.net/zhaoxinfan/article/details/126474777">https://blog.csdn.net/zhaoxinfan/article/details/126474777&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://blog.csdn.net/zhangjia453/article/details/115353982">https://blog.csdn.net/zhangjia453/article/details/115353982&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;p>Clonezilla 是类似于 &lt;a href="http://en.wikipedia.org/wiki/Acronis_True_Image">True Image&lt;/a> 或 &lt;a href="http://en.wikipedia.org/wiki/Ghost_%28software%29">Norton Ghost&lt;/a> 的分区和磁盘映像/克隆程序。它可以帮助您进行系统部署、裸机备份和恢复。可以使用三种类型的 Clonezilla：&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://clonezilla.org/clonezilla-live.php">Clonezilla live&lt;/a> # Clonezilla live 允许您使用 CD/DVD 或 USB 闪存驱动器启动和运行 clonezilla（仅限单播）&lt;/li>
&lt;li>&lt;a href="https://clonezilla.org/show-live-doc-content.php?topic=clonezilla-live/doc/11_lite_server">Clonezilla lite server&lt;/a> # Clonezilla 精简版服务器允许您使用 Clonezilla live 进行大规模克隆（支持单播、广播、多播、比特流）&lt;/li>
&lt;li>&lt;a href="https://clonezilla.org/clonezilla-SE/">Clonezilla SE&lt;/a> # Clonezilla SE 包含在 DRBL 中，因此必须首先设置 DRBL 服务器才能使用 Clonezilla 进行大规模克隆（支持单播、广播和组播）&lt;/li>
&lt;/ul>
&lt;p>Clonezilla live 适用于单机备份和恢复。虽然 Clonezilla 精简版服务器或 SE 用于大规模部署，但它可以同时克隆多台（40 多台！）计算机。Clonezilla 仅保存和恢复硬盘中使用过的块。这提高了克隆效率。对于 42 节点集群中的一些高端硬件，报告了以 8 GB/分钟的速率恢复的多播。&lt;/p>
&lt;p>&lt;strong>CloneZilla 可以将 Linux 完整移植到另一台机器中，保证数据，分区，挂载，启动项。。所有的一切完全一致&lt;/strong>&lt;/p>
&lt;blockquote>
&lt;p>注意：进行还原的机器需要与进行镜像封装的机器关键硬件配置一致，否则可能产生显卡驱动无法使用等问题&lt;/p>
&lt;/blockquote>
&lt;p>Clonezilla Live 本身就是一个小型的 Liunx 发行版，这就像是 Linux 版的 WinPE 一样。除了图形页面可供操作外，还可以通过命令行，执行诸如 ssh 之类的命令。这也就意味着，Clonezilla 可以读写远程存储设备中，封装好的 Linux 镜像可以直接写入到 NFS、S3 中，还原 Linux 时，也可以从这些远程存储设备中读取镜像。&lt;/p>
&lt;p>Clonezilla 源码实际上是运行程序本身，因为它们使用脚本(bash 或 perl)编写的。最初始保存在 &lt;a href="https://free.nchc.org.tw/clonezilla-live/">NCHC 存储库&lt;/a>中。在这个存储库中，我们可以从 &lt;a href="https://free.nchc.org.tw/clonezilla-live/experimental/">experimental/&lt;/a> 目录下找到 ARM 版本的 Clonezilla。&lt;/p>
&lt;h1 id="clonezilla-live-安装与使用">CloneZilla Live 安装与使用&lt;/h1>
&lt;p>从&lt;a href="https://clonezilla.org/downloads.php">此处&lt;/a>可以看到 Clonezilla Live 的所有下载链接&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-bb25fa732ef006ca39284e3f44683cbb_b.jpg" alt="">&lt;/p>
&lt;p>点击第一项 alternative stable 下载&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-4bcbb8b9baa704fb309c29d2ff541d28_b.jpg" alt="">&lt;/p>
&lt;p>选择 2 文件格式，可以在 zip 和 iso 间进行切换&lt;/p>
&lt;h2 id="制作-clonezilla-启动-u-盘">制作 CloneZilla 启动 U 盘&lt;/h2>
&lt;p>根据下载的文件类型的不同，有两种方式进行 U 盘制作&lt;/p>
&lt;h3 id="iso-文件">ISO 文件&lt;/h3>
&lt;p>若选择 iso 则通过&lt;strong>软碟通 UltraISO&lt;/strong> (&lt;a href="https://link.zhihu.com/?target=https%3A//cn.ultraiso.net/xiazai.html">https://cn.ultraiso.net/xiazai.html&lt;/a>)在 windows 设备上进行 U 盘刻录。&lt;/p>
&lt;p>安装完&lt;strong>软碟通 UltraISO&lt;/strong>后，插上待制作的 U 盘，打开软件，点击“打开”按钮，选择 CloneZilla 的 iso 文件打开&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-5bd64afb388461e5f2f76f9881771d4c_b.jpg" alt="">&lt;/p>
&lt;p>然后，点击顶部菜单栏的“启动”-&amp;gt;“写入硬盘镜像”&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-a936e71da8a97bf955bcba7a0376e1e2_b.jpg" alt="">&lt;/p>
&lt;p>选择 U 盘，点击“格式化”，格式选择 FAT32，格式化完毕后，写入方式选择“USB-HDD+”&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-0b8205cc4795bc658913251966643810_b.jpg" alt="">&lt;/p>
&lt;p>点击“编写启动”-&amp;gt;“syslinux”，写入 syslinux&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-614e796adc4303da7cfb1e5c4f1422b3_b.jpg" alt="">&lt;/p>
&lt;p>写入 CloneZilla 镜像&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-5d490a422045f4f86c4ccb6567b45808_b.jpg" alt="">&lt;/p>
&lt;p>至此 CloneZilla 启动 U 盘制作完毕&lt;/p>
&lt;h3 id="zip-文件">zip 文件&lt;/h3>
&lt;p>若选择 zip 则通过 Tuxboot (&lt;a href="https://link.zhihu.com/?target=https%3A//tuxboot.org/download/">https://tuxboot.org/download/&lt;/a>)进行 U 盘制作&lt;/p>
&lt;p>插入 U 盘，打开 Tuxboot，选择预下载，找到下载的 CloneZilla zip 文件，Driver 里面选择 U 盘盘符，点击 OK 就可以开始制作了&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-32b271f3244fa35fd314b13d3c123177_b.jpg" alt="">&lt;/p>
&lt;p>完成后如图&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-453308ec1c9937e3348602c88e44169a_b.jpg" alt="">&lt;/p>
&lt;p>至此 CloneZilla 启动 U 盘制作完毕。&lt;/p>
&lt;h1 id="封装linux系统">封装Linux系统&lt;/h1>
&lt;p>启动服务器，优先从 USB 启动，进入 CloneZilla，界面如下：&lt;/p>
&lt;ul>
&lt;li>选择第一项 &lt;strong>Clonezilla live (VGA 800 * 600)&lt;/strong>，进入图形化界面&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-2bca4e983efc7609b7a240f20db8fbb6_b.jpg" alt="">&lt;/p>
&lt;p>(2) 启动完毕，选择界面语言，选择“简体中文”。&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-2de00c8ee91ae22af6102e24ace38389_b.jpg" alt="">&lt;/p>
&lt;p>(3) 不修改键盘配置，使用美式键盘&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-435ba05287f493e7f644bc203aafd4e3_b.jpg" alt="">&lt;/p>
&lt;p>(4) 选择“使用再生龙”&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-484c15ddf62350b48281f13c29a191dd_b.jpg" alt="">&lt;/p>
&lt;p>(5) 选择“device-image 硬盘 / 分区「存到 / 来自」镜像文件”&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-4821ff6020786d84bff2e307d686b0e2_b.jpg" alt="">&lt;/p>
&lt;h2 id="设置镜像存储或读取的位置">设置镜像存储或读取的位置&lt;/h2>
&lt;p>为 Clonezilla 确定使用镜像文件的方式，比如本机分区(硬盘、U盘等)、远程主机目录等。这些方式任选其一即可&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/0-picgo/clonezilla_store_path.png" alt="image.png">&lt;/p>
&lt;h3 id="local_dev">local_dev&lt;/h3>
&lt;p>&lt;strong>1）准备另一个 U 盘作为封装镜像的存储盘&lt;/strong>&lt;/p>
&lt;p>注意：绝对不可以使用同一个启动 U 盘作为镜像的存储盘&lt;/p>
&lt;p>要准备另一个 U 盘才可完成封装工作，首先我们需要将此 U 盘进行格式化，并转换文件系统为 Linux 下通用的 ext4。&lt;strong>如果 U 盘存在足够的空间且格式为 ext4，则不需要格式化操作&lt;/strong>。&lt;/p>
&lt;ul>
&lt;li>a) 将此 U 盘插入到需要封装的 Linux 机器上，在 Linux 系统上进行 ext4 的格式化&lt;/li>
&lt;li>b) 打开 terminal，输入 sudo fdisk -l 查看当前所有磁盘，在该列表中应该可以看到 U 盘的名称，如/dev/sdb&lt;/li>
&lt;li>c) 通过 sudo umount /dev/sdb 取消此 U 盘的挂载，&lt;strong>注意：这一步必须做&lt;/strong>&lt;/li>
&lt;li>d) 使用 sudo mkfs.ext4 /dev/sdb 进行 ext4 格式的格式化&lt;/li>
&lt;li>e) 拔下格式化后的 U 盘，插上 CloneZilla 启动盘，重启电脑&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>2) 继续操作 Clonezilla&lt;/strong>&lt;/p>
&lt;p>选择 &lt;strong>local_dev&lt;/strong>，插入第一步准备好的 ext4 格式 U 盘，等待 5s 后按 enter 键检测 U 盘&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-801c9a1c20173e8abb74c93847395a34_b.jpg" alt="">&lt;/p>
&lt;p>下图中/dev/sda 是系统盘，/dev/sdc 是要把镜像文件拷贝到的 u 盘，执行 Ctrl + c 退出此窗口&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-38cf5e91ed530b8672205bfe96668803_b.jpg" alt="">&lt;/p>
&lt;p>选择插入的的 U 盘作为存放镜像文件的盘&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-86dcc178e454d03ac10051dc81ca3bc2_b.jpg" alt="">&lt;/p>
&lt;p>选择第一项“no-fsck”，跳过检测&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-ca8a63a12c7240ad05dbb84e9fc3f1c0_b.jpg" alt="">&lt;/p>
&lt;p>当前现在的目录名称为 u 盘的”/”, 通过上下键选择“”，之后使用“Tab”键选择“Done”即可&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-6523190d049d415d8d11f453f59512a3_b.jpg" alt="">&lt;/p>
&lt;p>根据提示信息按 Enter 键继续&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-d09e4579aa89e88cacb8c521b30c3486_b.png" alt="">&lt;/p>
&lt;h3 id="ssh_server">ssh_server&lt;/h3>
&lt;h3 id="s3">S3&lt;/h3>
&lt;pre tabindex="0">&lt;code>export AK=&amp;#34;XXX&amp;#34;
export SK=&amp;#34;YYY&amp;#34;
export ENDPOINT=&amp;#34;ZZZ&amp;#34;
tee /root/.passwd-s3fs &amp;lt;&amp;lt;EOF
${AK}:${SK}
EOF
chmod 600 /root/.passwd-s3fs
s3fs my-ocs-img /home/partimag -o passwd_file=/root/.passwd-s3fs -o url=&amp;#34;https://${ENDPOINT}&amp;#34;
&lt;/code>&lt;/pre>&lt;p>其本质是执行了如下命令：&lt;code>/usr/sbin/ocs-sr -q2 -c -j2 -zip -i 19146 -sfsck -senc -p choose savedisk sdo-img sdo&lt;/code>&lt;/p>
&lt;h2 id="配置运行时参数">配置运行时参数&lt;/h2>
&lt;p>选择“初学模式”，进入 CloneZilla 功能界面&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/0-picgo/clonezilla_config_args_1.png" alt="image.png">&lt;/p>
&lt;h2 id="选择要执行的操作">选择要执行的操作&lt;/h2>
&lt;p>选择“savedisk 存储本机硬盘为镜像文件”&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-5d8aaf82a29d7cf4135abf9f852ecd7c_b.jpg" alt="">&lt;/p>
&lt;p>输入要保存的镜像名称，并按 enter 结束&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-d6337a094a761676414588886281a421_b.jpg" alt="">&lt;/p>
&lt;p>选择要封装的硬盘，如果机器上有多个硬盘，此时可以选择多个要备份的硬盘，空格键选中，回车继续&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-a65dbd0d6faadf8acc2fc704157cab01_b.jpg" alt="">&lt;/p>
&lt;p>选择第一项默认使用 zip 压缩方式&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-55752fc86cbac54e4d4f0d23e180df46_b.jpg" alt="">&lt;/p>
&lt;p>选择“跳过检查与修正来源分区的文件系统”，这一步是用来检查硬盘的文件系统是否符合要求&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-384ae83f7ff238930dad965944266a78_b.jpg" alt="">&lt;/p>
&lt;p>选择“否”，这一步是用来检查保存的镜像是否可以被还原的&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-0816cacf4b7fc828d8cc5ebf3e6dc10c_b.jpg" alt="">&lt;/p>
&lt;p>选择是否要对镜像进行加密，这里选择“不加密”&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-4750ed41e41ccfd9b31336e038ca342a_b.jpg" alt="">&lt;/p>
&lt;p>这一步用于选择镜像封装完成后要执行的操作，可选“关机”、“重启”等，这里选择“当操作执行完后再选择”&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-c54a7964c1e3b205a16712610fcd7fe1_b.jpg" alt="">&lt;/p>
&lt;p>输入 y 后按“enter”回车，即可开始进行镜像封装了&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-ffb2f474690186d539f5f4ac93b2fbf0_b.jpg" alt="">&lt;/p>
&lt;p>镜像封装中&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-4c8fd45ccb63cd91da2691331cb6f327_b.jpg" alt="">&lt;/p>
&lt;p>镜像封装完成，按 enter 键继续&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-32ccb6c402a0c4aecde904f9c8d6e151_b.jpg" alt="">&lt;/p>
&lt;p>选择“关机”或“重启”，&lt;strong>注意：若选择“关机”或“重启”，不会有该界面出现，直接关机或重启；若选择重启，待屏幕黑屏后需将启动盘拔出。&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-74c60fc40ab08d48b204f3a00adbec58_b.jpg" alt="">&lt;/p>
&lt;h1 id="还原linux系统">还原Linux系统&lt;/h1>
&lt;p>在选择执行操作前，所有步骤与&lt;a href="#%E5%B0%81%E8%A3%85linux%E7%B3%BB%E7%BB%9F">封装Linux系统&lt;/a>前面的步骤一样&lt;/p>
&lt;h2 id="选择要执行的操作-1">选择要执行的操作&lt;/h2>
&lt;p>选择“restoredisk 还原镜像文件到本机硬盘”&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-457cda3e0e53500d3c19048f82fb3f83_b.jpg" alt="">&lt;/p>
&lt;p>(14) 选择需要还原的镜像文件&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-c6b1127ea5cf93def40a70133c995fb5_b.jpg" alt="">&lt;/p>
&lt;p>(15) 选择需要还原到的本机硬盘，&lt;strong>注意：该硬盘会被格式化!&lt;/strong>&lt;/p>
&lt;p>&lt;strong>选择硬盘时，如果镜像是从多块硬盘保存下来的，则可以选择多块硬盘；&lt;/strong>&lt;/p>
&lt;p>&lt;strong>如果封装镜像的硬盘是 2T，则不能在 1T 的硬盘上还原！！！&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-41139841999062e69231ae801dab04e0_b.jpg" alt="">&lt;/p>
&lt;p>(16) 询问是否需要检查镜像完整性，这里选择“否”&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-d6ad903a054dc45043c1707fb0c8b30e_b.png" alt="">&lt;/p>
&lt;p>(17) 询问完成还原后的操作，这一步与封装时一致，选择完后按 enter 键继续&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-7bba000cc0a0bff9143f216b47ef4af6_b.jpg" alt="">&lt;/p>
&lt;p>(18) 输入 y，并按 enter 键继续&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-1b7bc181974267c97c183a96d4a1082b_b.jpg" alt="">&lt;/p>
&lt;p>(19) 正在还原&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-e2f5545b2635c8be2a24b029b8d2535c_b.jpg" alt="">&lt;/p>
&lt;p>(20) 待还原结束后按 enter 键继续，选择重启，待黑屏后拔掉 U 盘&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/1f12dbea-164d-4f41-9cd2-fd92952d6310/v2-237df2b6aa6b869c45b04d48874aab23_b.jpg" alt="">&lt;/p></description></item><item><title>Docs: Linux 系统安装问题</title><link>https://desistdaydream.github.io/docs/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E5%AE%89%E8%A3%85%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E9%97%AE%E9%A2%98/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E5%AE%89%E8%A3%85%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E9%97%AE%E9%A2%98/</guid><description>
&lt;p>使用 U 盘安装 CentOS7 卡在”Starting dracut initqueue hook…”&lt;/p>
&lt;p>使用 U 盘安装系统的过程中遇到卡在 Starting dracut initqueue hook 这里的情况，过一会会报 timeout 的错误。这是因为安装程序没有找到安装文件的位置。&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/nebxk0/1616168532248-128a82ff-30cc-4b4d-9db2-efb3509b83fc.png" alt="">&lt;/p>
&lt;p>安装程序是按照卷标寻找分区的，可以在开机过程选择 Install CentOS 7 后按 tab 编辑开机选项，uefi 启动模式按 e 编辑。&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/nebxk0/1616168532228-b481918d-40fb-4a5d-9dd8-481d5d55422e.png" alt="">&lt;/p>
&lt;p>&lt;strong>问题原因：在安装 centos 时，设备无法找到 U 盘来启动安装程序&lt;/strong>&lt;/p>
&lt;p>在 ios 安装程序，找到/isolinux/isolinux.cfg(uefi 模式的配置文件路径为：/EFI/BOOT/grub.cfg)这个文件，效果如图&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/nebxk0/1616168532249-a2840410-d1be-4f90-b9de-29703f1040b9.png" alt="">&lt;/p>
&lt;p>此处 inst.stage2=hd:LABEL=CentOS\x207\x20x86_64。这就是造成超时的原因，inst.stage2 这里应该是指向一个具体的路径，如果是 DVD，它的标签就是“CentOS 7 x86_64”，而 U 盘则可能是你自己定义的标签。 这就造成了 DVD 能正常安装，U 盘就不行了。&lt;/p>
&lt;p>而为什么 U 盘的标签不是默认的 CentOS 7 x86_64 呢，是因为标签(LABEL)长度超出了 windows 的卷标长度限制(主要是因为这个 U 盘是在 windos 下制作的。。。)，并且 Windows 限制卷标只能使用大写字母，就算输入的是小写，实际上也是大写。&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/nebxk0/1616168532266-b8d3cc0c-b9aa-421d-a3e0-03c1bb252e65.png" alt="">&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/nebxk0/1616168532253-69173fc7-c704-459b-8057-7ef2d24837b4.png" alt="">&lt;/p>
&lt;p>&lt;strong>解决方式：&lt;/strong>&lt;/p>
&lt;h3 id="解决方式-1">解决方式 1：&lt;/h3>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/nebxk0/1616168532236-5667c5d2-d80e-428a-a9ae-28a8c02a9f96.png" alt="">&lt;/p>
&lt;ol>
&lt;li>
&lt;p>直接修改 /isolinux/isolinux.cfg 文件中的内容，将 CentOS\x207\x20x86_64 修改为 CENTOS7&lt;/p>
&lt;/li>
&lt;li>
&lt;p>然后在 windows 中修改 U 盘的标签名为 CENTOS7&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>这样就可以保证使用 U 盘安装时，服务器可以根据标签来读取到 U 盘并进行后续安装了&lt;/p>
&lt;h3 id="解决方式-2">解决方式 2：&lt;/h3>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/nebxk0/1616168532287-1f22f5eb-1b38-4bde-8048-9a5a8065373a.png" alt="">&lt;/p>
&lt;ol>
&lt;li>
&lt;p>在 windows 中修改 U 盘的标签名为 CENTOS7&lt;/p>
&lt;/li>
&lt;li>
&lt;p>在安装系统界面，如右图，按 e 或者 tab 进入编辑模式&lt;/p>
&lt;/li>
&lt;li>
&lt;p>修改 LABEL=后面的内容为 CENTOS7&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>以上两种解决方式都是让安装程序来根据 U 盘标签来识别 U 盘&lt;/p>
&lt;p>&lt;strong>注意 UEFI 启动模式则是修改/EFI/BOOT/grub.cfg 这个文件&lt;/strong>&lt;/p>
&lt;hr>
&lt;h3 id="解决方式-3">解决方式 3&lt;/h3>
&lt;p>首先等待 timeout 报错完成，这是会进入 dracut 的简易终端，cd /dev 执行 ls 查看有哪些分区，我的分区有 sda 和 sdb、sdb4，所以 sdb4 就是镜像所在的分区，编辑 inst.stage2=hd:LABEL=CentOS\x207\x2086_64 为 inst.stage2=hd:/dev/sdb4 按 enter 开机，efi 安装按 ctrl+x 启动。之后就能正常开机了。&lt;/p>
&lt;h2 id="因此具体操作有-2-个">因此，具体操作有 2 个&lt;/h2>
&lt;p>&lt;strong>1. 直接修改 /isolinux/isolinux.cfg 里 hd:LABEL= 为 U 盘的具体标签，或者将 U 盘的标签修改为 “CentOS 7 x86_64” ，按照正常流程安装即可。如果害怕空格影响，就把 isolinux.cfg 的 label 去掉\x20，同时 U 盘标签也去掉空格。&lt;/strong>&lt;/p>
&lt;p>&lt;strong>2. 在选择安装 CentOS 时，选择 Install CentOS 7 ,然后修改 按 e 键，进入修改状态，将 hd:LABEL= 修改为 U 盘的标签，或者修改为当前 U 盘在安装机的具体路径，一般为 /dev/hda1 等，栗子：“hd:LABEL=/dev/hda1”，然后按 Ctrl+x 开始执行安装。&lt;/strong>&lt;/p>
&lt;p>当然，我还是推荐修改标签的方式来解决。&lt;/p></description></item></channel></rss>