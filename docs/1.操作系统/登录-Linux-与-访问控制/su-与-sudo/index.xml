<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>su 与 sudo on 断念梦的站点</title><link>https://desistdaydream.github.io/docs/1.%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%99%BB%E5%BD%95-Linux-%E4%B8%8E-%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/su-%E4%B8%8E-sudo/</link><description>Recent content in su 与 sudo on 断念梦的站点</description><generator>Hugo</generator><language>zh-cn</language><atom:link href="https://desistdaydream.github.io/docs/1.%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%99%BB%E5%BD%95-Linux-%E4%B8%8E-%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/su-%E4%B8%8E-sudo/index.xml" rel="self" type="application/rss+xml"/><item><title>su 与 sudo</title><link>https://desistdaydream.github.io/docs/1.%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%99%BB%E5%BD%95-Linux-%E4%B8%8E-%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/su-%E4%B8%8E-sudo/su-%E4%B8%8E-sudo/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/1.%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%99%BB%E5%BD%95-Linux-%E4%B8%8E-%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/su-%E4%B8%8E-sudo/su-%E4%B8%8E-sudo/</guid><description>概述 参考：
su 参考：
Manual(手册), su(1) 总结 使用 su 命令切换用户身份然后执行命令虽然简单，但是，也有一些致命的缺点：
普通用户必须知道 root 密码才可以切换到 root，这样 root 密码就泄漏了。 使用 su 命令切换身份，无法对切换后的身份做精细的控制，拿到超级权限的人可以为所欲为。甚至可以改掉 root 密码，让真正的管理员无法再拥有 root 权限。 这时候，就可以使用 sudo 工具
su 配置 /etc/pam.d/su #
/etc/pam.d/su-l #
/etc/default/su #
/etc/login.defs #
sudo 参考：
Manual(手册), sudo(8) Manual(手册), sudoers(5) 如何改变 sudo 日志文件 sudo(substitute user [或 superuser] do) 程序可以让当前用户使用其他的用户的权限来执行指定的命令
通过 sudo 命令，我们可以把某些 root 权限(e.g.只有 root 用户才能执行的命令)分类有针对性授权给指定的普通用户，并且普通用户不需要知道 root 密码就可以使用得到的授权来管理。效果如下所示(配置好 sudo 之后，普通用户 desistdaydream 也可以通过在命令前加 sudo 来执行 root 才能执行的命令) sudo 通过各种插件实现功能。默认插件为 sudoers，用来确定用户的 sudo 权限，sudoers 的策略，通过 /etc/sudoers 文件进行配置，或者在 LDAP 中进行配置。</description></item><item><title>sudoers 配置详解</title><link>https://desistdaydream.github.io/docs/1.%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%99%BB%E5%BD%95-Linux-%E4%B8%8E-%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/su-%E4%B8%8E-sudo/sudoers-%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/1.%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%99%BB%E5%BD%95-Linux-%E4%B8%8E-%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/su-%E4%B8%8E-sudo/sudoers-%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3/</guid><description>概述 参考：
Manual(手册),sudoers(5)-sudoers 文件格式 使用 visudo 命令可直接进入编辑模式以编辑 /etc/sudoers 文件
sudoers 文件使用 Extended Backus-Naur Form(简称 EBNF) 格式书写。
sudoers 文件由如下几类条目组成：
Aliases(别名) # User Specifications(用户规范) # 即指定谁可以运行什么程序 Defaults # Defaults 条目的配置，可以在运行时变更 sudo 的运行行为。 比如配置日志输出路径等等。 Aliases 用户规范条目中的每个字段都可以使用别名来表示，提前设置好别名，然后在这个字段使用别名来表示
sudoers 中可以设置 4 种别名：
User_Alias(用户别名) Runas_Alias() Host_Alias(主机别名) Cmnd_Alias(命令别名) 别名语法：
在别名的设置中，可以使用 * 这种通配符来匹配所有
User_Alias 别名名称 = 用户名,&amp;hellip; Host_Alias 别名名称 = 主机名,&amp;hellip; Cmnd_Alias 别名名称 = 命令,&amp;hellip; 默认配置示例 ## 主机别名 ## 对于一组服务器，你可能会更喜欢使用主机名（可能是全域名的通配符） ## 或IP地址代替，这时可以配置主机别名 # Host_Alias FILESERVERS = fs1, fs2 # Host_Alias MAILSERVERS = smtp, smtp2 ## 用户别名 ## 这并不很常用，因为你可以通过使用组来代替一组用户的别名 # User_Alias ADMINS = jsmith, mikem ## 命令别名 ## 指定一系列相互关联的命令（当然可以是一个）的别名，通过赋予该别名sudo权限， ## 可以通过sudo调用所有别名包含的命令，下面是一些示例 ## 网络操作相关命令别名 Cmnd_Alias NETWORKING = /sbin/route, /sbin/ifconfig, /bin/ping, /sbin/dhclient, /usr/bin/net, /sbin/iptables, /usr/bin/rfcomm, /usr/bin/wvdial, /sbin/iwconfig, /sbin/mii-tool ## 软件安装管理相关命令别名 Cmnd_Alias SOFTWARE = /bin/rpm, /usr/bin/up2date, /usr/bin/yum ## 服务相关命令别名 Cmnd_Alias SERVICES = /sbin/service, /sbin/chkconfig ## 本地数据库升级命令别名 Cmnd_Alias LOCATE = /usr/sbin/updatedb ## 磁盘操作相关命令别名 Cmnd_Alias STORAGE = /sbin/fdisk, /sbin/sfdisk, /sbin/parted, /sbin/partprobe, /bin/mount, /bin/umount ## 代理权限相关命令别名 Cmnd_Alias DELEGATING = /usr/sbin/visudo, /bin/chown, /bin/chmod, /bin/chgrp ## 进程相关命令别名 Cmnd_Alias PROCESSES = /bin/nice, /bin/kill, /usr/bin/kill, /usr/bin/killall ## 驱动命令别名 Cmnd_Alias DRIVERS = /sbin/modprobe User Specifications User Specifications(用户规范) 用来指定谁可以运行什么程序，可以理解为赋权。</description></item></channel></rss>