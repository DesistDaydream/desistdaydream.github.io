<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>性能优化与故障处理 on 断念梦的站点</title><link>https://desistdaydream.github.io/docs/10.%E4%BA%91%E5%8E%9F%E7%94%9F/Virtualization-implementation/%E8%99%9A%E6%8B%9F%E5%8C%96%E7%AE%A1%E7%90%86/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%8E%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/</link><description>Recent content in 性能优化与故障处理 on 断念梦的站点</description><generator>Hugo</generator><language>zh-cn</language><atom:link href="https://desistdaydream.github.io/docs/10.%E4%BA%91%E5%8E%9F%E7%94%9F/Virtualization-implementation/%E8%99%9A%E6%8B%9F%E5%8C%96%E7%AE%A1%E7%90%86/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%8E%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/index.xml" rel="self" type="application/rss+xml"/><item><title>常见问题</title><link>https://desistdaydream.github.io/docs/10.%E4%BA%91%E5%8E%9F%E7%94%9F/Virtualization-implementation/%E8%99%9A%E6%8B%9F%E5%8C%96%E7%AE%A1%E7%90%86/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%8E%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/10.%E4%BA%91%E5%8E%9F%E7%94%9F/Virtualization-implementation/%E8%99%9A%E6%8B%9F%E5%8C%96%E7%AE%A1%E7%90%86/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%8E%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/</guid><description>概述 参考：
Unable to complete install: &amp;lsquo;VM &amp;lsquo;XXXX&amp;rsquo; didn&amp;rsquo;t show up after expected time.&amp;rsquo; 使用 virt-manager 安装 VM 时，惦记 Bejin Install 后报错。
TODO: 咋解决？？
guest has not initialized the display 无法连接虚拟机显示器
video 设备选为 Node 后，连接虚拟机提示 This VM has no graphic display device
使用 qemu-system 运行不会有这个问题，使用 virt-install 运行时会出现这个问题
TODO: 咋解决？？
Requested operation is not valid: cannot undefine domain with nvram 用 virsh 删除虚拟机时报错
解决方案：添加 &amp;ndash;nvram 或者删除配置文件中的这行 &amp;lt;nvram&amp;gt;/var/lib/libvirt/qemu/nvram/debian6.0_VARS.fd&amp;lt;/nvram&amp;gt;
TODO: 咋解决？？</description></item><item><title>虚拟化调试和优化指南</title><link>https://desistdaydream.github.io/docs/10.%E4%BA%91%E5%8E%9F%E7%94%9F/Virtualization-implementation/%E8%99%9A%E6%8B%9F%E5%8C%96%E7%AE%A1%E7%90%86/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%8E%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/%E8%99%9A%E6%8B%9F%E5%8C%96%E8%B0%83%E8%AF%95%E5%92%8C%E4%BC%98%E5%8C%96%E6%8C%87%E5%8D%97/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/10.%E4%BA%91%E5%8E%9F%E7%94%9F/Virtualization-implementation/%E8%99%9A%E6%8B%9F%E5%8C%96%E7%AE%A1%E7%90%86/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%8E%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/%E8%99%9A%E6%8B%9F%E5%8C%96%E8%B0%83%E8%AF%95%E5%92%8C%E4%BC%98%E5%8C%96%E6%8C%87%E5%8D%97/</guid><description>概述 参考：
红帽官方文档，7 - 虚拟化调整和优化指南 新链接: https://docs.redhat.com/zh_hans/documentation/red_hat_enterprise_linux/7/html-single/virtualization_tuning_and_optimization_guide/index 网卡软中断过高问题 原文连接: https://mp.weixin.qq.com/s/X3wsJ13V-ou7j8qccd30AA
游戏网关高峰期时出网络丢包,CPU0 软中断%sys 高达 90%。
这意思就是说多个 CPU 中，只有 1 个来处理软中断信号
使用 ethtool -l eth0 查看网卡队列数，若网卡不支持多多列，将会报错: netlink error: Operation not supported
配置网卡多队列 参考:
https://access.redhat.com/documentation/zh-cn/red_hat_enterprise_linux/7/html-single/virtualization_tuning_and_optimization_guide/index#sect-Virtualization_Tuning_Optimization_Guide-Networking-Multi-queue_virtio-net https://docs.redhat.com/zh_hans/documentation/red_hat_enterprise_linux/7/html/virtualization_tuning_and_optimization_guide/sect-virtualization_tuning_optimization_guide-networking-multi-queue_virtio-net 要使用多队列 virtio-net，请在 VM 的 XML 配置中添加以下内容（主要是添加 queues='N'，其中 N 的值从 1 到 256，因为内核支持多队列 tap 设备）支持 256 个队列：
&amp;lt;interface type=&amp;#39;network&amp;#39;&amp;gt; &amp;lt;source network=&amp;#39;default&amp;#39;/&amp;gt; &amp;lt;model type=&amp;#39;virtio&amp;#39;/&amp;gt; &amp;lt;driver name=&amp;#39;vhost&amp;#39; queues=&amp;#39;N&amp;#39;/&amp;gt; &amp;lt;/interface&amp;gt; 当在 VM 中运行带有 N virtio-net 队列的虚拟机时，使用以下命令（ M 的值从 1 到 N）启用多队列支持 ：</description></item></channel></rss>