<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>断念梦的站点 – 重大变化</title><link>https://desistdaydream.github.io/docs/10.%E4%BA%91%E5%8E%9F%E7%94%9F/2.3.Kubernetes-%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92%E7%B3%BB%E7%BB%9F/Kubernetes-%E7%AE%A1%E7%90%86/%E9%87%8D%E5%A4%A7%E5%8F%98%E5%8C%96/</link><description>Recent content in 重大变化 on 断念梦的站点</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><atom:link href="https://desistdaydream.github.io/docs/10.%E4%BA%91%E5%8E%9F%E7%94%9F/2.3.Kubernetes-%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92%E7%B3%BB%E7%BB%9F/Kubernetes-%E7%AE%A1%E7%90%86/%E9%87%8D%E5%A4%A7%E5%8F%98%E5%8C%96/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs: 大事件：Kubernetes不再在kubelet中维护docker-shim代码</title><link>https://desistdaydream.github.io/docs/10.%E4%BA%91%E5%8E%9F%E7%94%9F/2.3.Kubernetes-%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92%E7%B3%BB%E7%BB%9F/Kubernetes-%E7%AE%A1%E7%90%86/%E9%87%8D%E5%A4%A7%E5%8F%98%E5%8C%96/%E5%A4%A7%E4%BA%8B%E4%BB%B6Kubernetes%E4%B8%8D%E5%86%8D%E5%9C%A8kubelet%E4%B8%AD%E7%BB%B4%E6%8A%A4docker-shim%E4%BB%A3%E7%A0%81/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/10.%E4%BA%91%E5%8E%9F%E7%94%9F/2.3.Kubernetes-%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92%E7%B3%BB%E7%BB%9F/Kubernetes-%E7%AE%A1%E7%90%86/%E9%87%8D%E5%A4%A7%E5%8F%98%E5%8C%96/%E5%A4%A7%E4%BA%8B%E4%BB%B6Kubernetes%E4%B8%8D%E5%86%8D%E5%9C%A8kubelet%E4%B8%AD%E7%BB%B4%E6%8A%A4docker-shim%E4%BB%A3%E7%A0%81/</guid><description>
&lt;p>大事件：Kubernetes 不再在 kubelet 中维护 docker-shim 代码&lt;/p>
&lt;p>&lt;a href="https://kubernetes.io/blog/2020/12/02/dont-panic-kubernetes-and-docker/">原文链接&lt;/a>&lt;/p>
&lt;p>Don&amp;rsquo;t Panic: Kubernetes and Docker&lt;/p>
&lt;p>Wednesday, December 02, 2020&lt;/p>
&lt;p>&lt;strong>Authors:&lt;/strong> Jorge Castro, Duffie Cooley, Kat Cosgrove, Justin Garrison, Noah Kantrowitz, Bob Killen, Rey Lejano, Dan “POP” Papandrea, Jeffrey Sica, Davanum “Dims” Srinivas&lt;/p>
&lt;p>Kubernetes is deprecating Docker as a container runtime after v1.20.&lt;/p>
&lt;p>&lt;strong>You do not need to panic. It’s not as dramatic as it sounds.&lt;/strong>&lt;/p>
&lt;p>tl;dr Docker as an underlying runtime is being deprecated in favor of runtimes that use the Container Runtime Interface(CRI) created for Kubernetes. Docker-produced images will continue to work in your cluster with all runtimes, as they always have.&lt;/p>
&lt;p>If you’re an end-user of Kubernetes, not a whole lot will be changing for you. This doesn’t mean the death of Docker, and it doesn’t mean you can’t, or shouldn’t, use Docker as a development tool anymore. Docker is still a useful tool for building containers, and the images that result from running &lt;code>docker build&lt;/code> can still run in your Kubernetes cluster.&lt;/p>
&lt;p>If you’re using a managed Kubernetes service like GKE, EKS, or AKS (which defaults to containerd) you will need to make sure your worker nodes are using a supported container runtime before Docker support is removed in a future version of Kubernetes. If you have node customizations you may need to update them based on your environment and runtime requirements. Please work with your service provider to ensure proper upgrade testing and planning.&lt;/p>
&lt;p>If you’re rolling your own clusters, you will also need to make changes to avoid your clusters breaking. At v1.20, you will get a deprecation warning for Docker. When Docker runtime support is removed in a future release (currently planned for the 1.22 release in late 2021) of Kubernetes it will no longer be supported and you will need to switch to one of the other compliant container runtimes, like containerd or CRI-O. Just make sure that the runtime you choose supports the docker daemon configurations you currently use (e.g. logging).&lt;/p>
&lt;h2 id="so-why-the-confusion-and-what-is-everyone-freaking-out-about">So why the confusion and what is everyone freaking out about?&lt;a class="td-heading-self-link" href="#so-why-the-confusion-and-what-is-everyone-freaking-out-about" aria-label="Heading self-link">&lt;/a>&lt;/h2>
&lt;p>We’re talking about two different environments here, and that’s creating confusion. Inside of your Kubernetes cluster, there’s a thing called a container runtime that’s responsible for pulling and running your container images. Docker is a popular choice for that runtime (other common options include containerd and CRI-O), but Docker was not designed to be embedded inside Kubernetes, and that causes a problem.&lt;/p>
&lt;p>You see, the thing we call “Docker” isn’t actually one thing &amp;ndash; it’s an entire tech stack, and one part of it is a thing called “containerd,” which is a high-level container runtime by itself. Docker is cool and useful because it has a lot of UX enhancements that make it really easy for humans to interact with while we’re doing development work, but those UX enhancements aren’t necessary for Kubernetes, because it isn’t a human.&lt;/p>
&lt;p>As a result of this human-friendly abstraction layer, your Kubernetes cluster has to use another tool called Dockershim to get at what it really needs, which is containerd. That’s not great, because it gives us another thing that has to be maintained and can possibly break. What’s actually happening here is that Dockershim is being removed from Kubelet as early as v1.23 release, which removes support for Docker as a container runtime as a result. You might be thinking to yourself, but if containerd is included in the Docker stack, why does Kubernetes need the Dockershim?&lt;/p>
&lt;p>Docker isn’t compliant with CRI, the Container Runtime Interface. If it were, we wouldn’t need the shim, and this wouldn’t be a thing. But it’s not the end of the world, and you don’t need to panic &amp;ndash; you just need to change your container runtime from Docker to another supported container runtime.&lt;/p>
&lt;p>One thing to note: If you are relying on the underlying docker socket (/var/run/docker.sock) as part of a workflow within your cluster today, moving to a different runtime will break your ability to use it. This pattern is often called Docker in Docker. There are lots of options out there for this specific use case including things like kaniko, img, and buildah.&lt;/p>
&lt;h2 id="what-does-this-change-mean-for-developers-though-do-we-still-write-dockerfiles-do-we-still-build-things-with-docker">What does this change mean for developers, though? Do we still write Dockerfiles? Do we still build things with Docker?&lt;a class="td-heading-self-link" href="#what-does-this-change-mean-for-developers-though-do-we-still-write-dockerfiles-do-we-still-build-things-with-docker" aria-label="Heading self-link">&lt;/a>&lt;/h2>
&lt;p>This change addresses a different environment than most folks use to interact with Docker. The Docker installation you’re using in development is unrelated to the Docker runtime inside your Kubernetes cluster. It’s confusing, I know. As a developer, Docker is still useful to you in all the ways it was before this change was announced. The image that Docker produces isn’t really a Docker-specific image &amp;ndash; it’s an OCI (Open Container Initiative) image. Any OCI-compliant image, regardless of the tool you use to build it, will look the same to Kubernetes. Both containerd and CRI-O know how to pull those images and run them. This is why we have a standard for what containers should look like.&lt;/p>
&lt;p>So, this change is coming. It’s going to cause issues for some, but it isn’t catastrophic, and generally it’s a good thing. Depending on how you interact with Kubernetes, this could mean nothing to you, or it could mean a bit of work. In the long run, it’s going to make things easier. If this is still confusing for you, that’s okay &amp;ndash; there’s a lot going on here, Kubernetes has a lot of moving parts, and nobody is an expert in 100% of it. We encourage any and all questions regardless of experience level or complexity! Our goal is to make sure everyone is educated as much as possible on the upcoming changes. &lt;code>&amp;lt;3&lt;/code> We hope this has answered most of your questions and soothed some anxieties!&lt;/p>
&lt;p>Looking for more answers? Check out our accompanying Dockershim Deprecation FAQ.&lt;/p></description></item><item><title>Docs: 大事件：美国安全局 NSA、CISA 发布 Kubernetes 安全加固指南</title><link>https://desistdaydream.github.io/docs/10.%E4%BA%91%E5%8E%9F%E7%94%9F/2.3.Kubernetes-%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92%E7%B3%BB%E7%BB%9F/Kubernetes-%E7%AE%A1%E7%90%86/%E9%87%8D%E5%A4%A7%E5%8F%98%E5%8C%96/%E5%A4%A7%E4%BA%8B%E4%BB%B6%E7%BE%8E%E5%9B%BD%E5%AE%89%E5%85%A8%E5%B1%80-NSACISA-%E5%8F%91%E5%B8%83-Kubernetes-%E5%AE%89%E5%85%A8%E5%8A%A0%E5%9B%BA%E6%8C%87%E5%8D%97/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/10.%E4%BA%91%E5%8E%9F%E7%94%9F/2.3.Kubernetes-%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92%E7%B3%BB%E7%BB%9F/Kubernetes-%E7%AE%A1%E7%90%86/%E9%87%8D%E5%A4%A7%E5%8F%98%E5%8C%96/%E5%A4%A7%E4%BA%8B%E4%BB%B6%E7%BE%8E%E5%9B%BD%E5%AE%89%E5%85%A8%E5%B1%80-NSACISA-%E5%8F%91%E5%B8%83-Kubernetes-%E5%AE%89%E5%85%A8%E5%8A%A0%E5%9B%BA%E6%8C%87%E5%8D%97/</guid><description>
&lt;p>&lt;a href="https://mp.weixin.qq.com/s/sfYpGScDNgf2tsIYZOYAWw">https://mp.weixin.qq.com/s/sfYpGScDNgf2tsIYZOYAWw&lt;/a>&lt;/p>
&lt;p>PDF原文：&lt;a href="https://www.nsa.gov/News-Features/Feature-Stories/Article-View/Article/2716980/nsa-cisa-release-kubernetes-hardening-guidance/">https://www.nsa.gov/News-Features/Feature-Stories/Article-View/Article/2716980/nsa-cisa-release-kubernetes-hardening-guidance/&lt;/a>
中文翻译：&lt;a href="https://jimmysong.io/kubernetes-hardening-guidance/">https://jimmysong.io/kubernetes-hardening-guidance/&lt;/a>&lt;/p>
&lt;p>Kubernetes 最初由谷歌公司的工程师开发，随后由云原生计算基金会开源，它是当前最流行的容器协作软件。Kubernetes 主要用于基于云的基础设施内部，便于系统管理员使用软件容器部署新的 IT 资源。&lt;/p>
&lt;p>Kubernetes 的攻击目标通常有以下三个原因：&lt;strong>数据窃取、计算能力窃取或拒绝服务&lt;/strong>。传统上，数据盗窃是主要动机。&lt;/p>
&lt;p>然而，由于 Kubernetes 和 Docker 模型和传统的单片软件平台之间存在巨大不同，因此很多系统管理员在安全配置 Kubernetes 方面问题颇多。多年来，多款密币挖掘僵尸网络都在攻击这类配置错误问题。&lt;/p>
&lt;p>威胁行动者扫描互联网上被暴露的未认证的 Kubernetes 管理功能或者扫描在大型 Kubernetes 集群（如 Argo Workflow 或 Kubeflow）上运行的应用程序，获得对 Kubernetes 后端的访问权限，之后利用这种权限在受害者云基础设施上部署密币挖掘应用。这些攻击早在 2017 年初就已发生，而现在已发展为多个团伙为了利用同一个配置错误的集群而大打出手。&lt;/p>
&lt;p>美国国家安全局 (NSA) 和网络安全与基础设施安全局 (CISA) 近日发布了一份 59 页的网络安全技术报告『Kubernetes 安全加固指南』。该报告详细介绍了对 Kubernetes 环境的威胁，并提供了配置指南以最大限度地降低风险。&lt;/p>
&lt;p>CISA 和 NSA 发布的这份指南旨在为系统管理员提供关于未来 Kubernetes 配置的安全基线，以避免遭受此类攻击。另外除了基本的配置指南外，这份报告还详述了企业和政府机构可采取的基本缓解措施，阻止或限制 Kubernetes 安全事件的严重性，包括：&lt;/p>
&lt;ul>
&lt;li>扫描容器和 Pods，查找漏洞或配置错误问题。&lt;/li>
&lt;li>尽可能以最小权限运行容器和 Pods。&lt;/li>
&lt;li>使用网络分割来控制攻陷事件造成的损害。&lt;/li>
&lt;li>使用防火墙来限制不必要的网络连接和加密以保护机密性。&lt;/li>
&lt;li>使用强认证和授权限制用户和管理员访问权限以及限制攻击面。&lt;/li>
&lt;li>使用日志审计，以便管理员能够监控活动并收到关于潜在恶意活动的警报。&lt;/li>
&lt;li>定期审计所有的 Kubernetes 设置并使用漏洞扫描确保安全风险得到控制，补丁已应用。&lt;/li>
&lt;/ul>
&lt;p>NSA 和 CISA 的这份指南侧重于安全挑战，并建议系统管理员尽可能强化他们的环境。NSA 发布此指南是支持美国国防部、国防工业基地和国家安全系统的使命的一部分。&lt;/p></description></item><item><title>Docs: 重大变化</title><link>https://desistdaydream.github.io/docs/10.%E4%BA%91%E5%8E%9F%E7%94%9F/2.3.Kubernetes-%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92%E7%B3%BB%E7%BB%9F/Kubernetes-%E7%AE%A1%E7%90%86/%E9%87%8D%E5%A4%A7%E5%8F%98%E5%8C%96/%E9%87%8D%E5%A4%A7%E5%8F%98%E5%8C%96/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/10.%E4%BA%91%E5%8E%9F%E7%94%9F/2.3.Kubernetes-%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92%E7%B3%BB%E7%BB%9F/Kubernetes-%E7%AE%A1%E7%90%86/%E9%87%8D%E5%A4%A7%E5%8F%98%E5%8C%96/%E9%87%8D%E5%A4%A7%E5%8F%98%E5%8C%96/</guid><description>
&lt;h1 id="概述">概述&lt;a class="td-heading-self-link" href="#%e6%a6%82%e8%bf%b0" aria-label="Heading self-link">&lt;/a>&lt;/h1>
&lt;blockquote>
&lt;p>参考：&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/kubernetes/kubernetes/tree/master/CHANGELOG">GitHub，kubernetes/kubernetes-CHANGELOG&lt;/a>&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;p>该文档记录 Kubernetes 历史上的重大事件，以及比较重要的版本更新信息。&lt;/p>
&lt;p>&lt;a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.16.md">1.16 更新日志&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.19.md">1.19 更新日志&lt;/a>&lt;/p>
&lt;h1 id="版本更新">版本更新&lt;a class="td-heading-self-link" href="#%e7%89%88%e6%9c%ac%e6%9b%b4%e6%96%b0" aria-label="Heading self-link">&lt;/a>&lt;/h1>
&lt;p>1.22&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://mp.weixin.qq.com/s/TQoyU3S2q4Q-yCK0zGHo9g">https://mp.weixin.qq.com/s/TQoyU3S2q4Q-yCK0zGHo9g&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://mp.weixin.qq.com/s/PTPTmR6Dprqsyd6E-hBvlw">https://mp.weixin.qq.com/s/PTPTmR6Dprqsyd6E-hBvlw&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://kubernetes.io/blog/2021/07/14/upcoming-changes-in-kubernetes-1-22/">https://kubernetes.io/blog/2021/07/14/upcoming-changes-in-kubernetes-1-22/&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>1.23&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://mp.weixin.qq.com/s/SiFhhDHHjHNbg8QPX4fOBw">https://mp.weixin.qq.com/s/SiFhhDHHjHNbg8QPX4fOBw&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>1.24&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://mp.weixin.qq.com/s/Nd9UFyqRKS6qpUJGF9nAYg">公众号-CNCF，Kubernetes 1.24：观星者&lt;/a>&lt;/li>
&lt;li>Dockershim 从 kubelet 中删除&lt;/li>
&lt;/ul>
&lt;p>1.25&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://mp.weixin.qq.com/s/6nhv2zQIAOAfUJ661YmDsQ">https://mp.weixin.qq.com/s/6nhv2zQIAOAfUJ661YmDsQ&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://mp.weixin.qq.com/s/6yrd1Dtf0wA0Ixu-Fr4MNQ">https://mp.weixin.qq.com/s/6yrd1Dtf0wA0Ixu-Fr4MNQ&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://mp.weixin.qq.com/s/Rn0A8SzLJvPJbwAIhHuRbQ">https://mp.weixin.qq.com/s/Rn0A8SzLJvPJbwAIhHuRbQ&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>1.26&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://mp.weixin.qq.com/s/P-pJ8Fl-GxZwz76GdxGbuA">公众号-CNCF，Kubernetes v1.26：振奋人心&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>1.29&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://mp.weixin.qq.com/s/Oyf7h1BOfnKPHBg41C4RZg">公众号-CNCF，Kubernetes v1.29: 曼陀罗&lt;/a>&lt;/li>
&lt;/ul></description></item></channel></rss>