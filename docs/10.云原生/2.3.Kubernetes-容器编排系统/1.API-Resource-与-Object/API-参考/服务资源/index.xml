<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>断念梦 – 服务资源</title><link>https://desistdaydream.github.io/docs/10.%E4%BA%91%E5%8E%9F%E7%94%9F/2.3.Kubernetes-%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92%E7%B3%BB%E7%BB%9F/1.API-Resource-%E4%B8%8E-Object/API-%E5%8F%82%E8%80%83/%E6%9C%8D%E5%8A%A1%E8%B5%84%E6%BA%90/</link><description>Recent content in 服务资源 on 断念梦</description><generator>Hugo -- gohugo.io</generator><atom:link href="https://desistdaydream.github.io/docs/10.%E4%BA%91%E5%8E%9F%E7%94%9F/2.3.Kubernetes-%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92%E7%B3%BB%E7%BB%9F/1.API-Resource-%E4%B8%8E-Object/API-%E5%8F%82%E8%80%83/%E6%9C%8D%E5%8A%A1%E8%B5%84%E6%BA%90/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs: Ingress Manifest 详解</title><link>https://desistdaydream.github.io/docs/10.%E4%BA%91%E5%8E%9F%E7%94%9F/2.3.Kubernetes-%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92%E7%B3%BB%E7%BB%9F/1.API-Resource-%E4%B8%8E-Object/API-%E5%8F%82%E8%80%83/%E6%9C%8D%E5%8A%A1%E8%B5%84%E6%BA%90/Ingress-Manifest-%E8%AF%A6%E8%A7%A3/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/10.%E4%BA%91%E5%8E%9F%E7%94%9F/2.3.Kubernetes-%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92%E7%B3%BB%E7%BB%9F/1.API-Resource-%E4%B8%8E-Object/API-%E5%8F%82%E8%80%83/%E6%9C%8D%E5%8A%A1%E8%B5%84%E6%BA%90/Ingress-Manifest-%E8%AF%A6%E8%A7%A3/</guid><description>
&lt;h1 id="概述">概述&lt;/h1>
&lt;blockquote>
&lt;p>参考：&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.21/#ingress-v1-networking-k8s-io">API 文档,单页&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://kubernetes.io/docs/reference/kubernetes-api/service-resources/ingress-v1/">官方文档,参考-Kubernetes API-服务资源-Ingress&lt;/a>&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h1 id="apiversion-networkingv1">apiVersion: networking/v1&lt;/h1>
&lt;h1 id="kind-ingress">kind: Ingress&lt;/h1>
&lt;h1 id="metadata">metadata&lt;/h1>
&lt;ul>
&lt;li>**name:**STRING # Ingress 对象名称。必须名称空间唯一。&lt;/li>
&lt;li>&lt;strong>annotations:&lt;/strong> # Ingress 的控制器将会根据 annotations，以自定义其行为。这些注释下的 kev/value 对 可以通过 ingress 传递给 controller ，然后 controller 根据这些信息进行更详细的配置，比如 url rewrite、代理超时时间等等。
&lt;ul>
&lt;li>注意：不同的 controller 对 annotaions 中定义的内容有不同的处理。
&lt;ul>
&lt;li>&lt;a href="https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/annotations/">nginx ingress controller 社区版的 annotaions 说明&lt;/a>&lt;/li>
&lt;li>nginx ingress controller 官方版的 annotaions 说明&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>如果是在公有云上，公有云的各种 LB，也会读取 annotations 中的内容，以便将自家的 LB 与 ingress 关联&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h1 id="spec">spec&lt;/h1>
&lt;h2 id="defaultbackend-object">defaultBackend: &lt;!-- raw HTML omitted -->&lt;/h2>
&lt;h2 id="ingressclassname-string">ingressClassName: &lt;!-- raw HTML omitted -->&lt;/h2>
&lt;h2 id="rules-object--是一个类似于-nginx-的-7-层反向代理的配置">rules: &amp;lt;[]Object&amp;gt; # 是一个类似于 nginx 的 7 层反向代理的配置&lt;/h2>
&lt;p>Ingress 资源最重要的字段，主要的实现逻辑都在这里了&lt;/p>
&lt;ul>
&lt;li>&lt;strong>host: &lt;!-- raw HTML omitted -->&lt;/strong> # (可省略，省略之后，可以使用 ip 来访问而不用使用域名)指定用户访问的域名，必须是 FQDN(完全限定域名)，不能是 IP，类似于 nginx 的 service 字段&lt;/li>
&lt;li>&lt;strong>http: &lt;!-- raw HTML omitted -->&lt;/strong> #
&lt;ul>
&lt;li>&lt;strong>paths: &amp;lt;[]Object&amp;gt;&lt;/strong> # 用来定义，当用户访问不同资源时，把用户请求代理到不同的后端 Service，然后 Service 再把请求交给 Pod
&lt;ul>
&lt;li>&lt;strong>backend: &lt;!-- raw HTML omitted --> # 必须的&lt;/strong>。定义要把哪些后端 Pod 的信息发送给 IngressController，如果是 IngressController 是 nginx，那么就是 upstream 的 IP 和 Port。可以通过两种方式来获取后端 Pod 的信息。&lt;/li>
&lt;li>&lt;strong>resource: &lt;!-- raw HTML omitted -->&lt;/strong> #&lt;/li>
&lt;li>&lt;strong>service: &lt;!-- raw HTML omitted -->&lt;/strong> # 指定后端类型为 service，就是通过 service 资源关联的 pod 来获取后端 pod。service 与 resource 字段互斥。
&lt;ul>
&lt;li>&lt;strong>name: &lt;!-- raw HTML omitted --> # 必须的&lt;/strong>。指明用于采集后端后端 Pod 信息的 service 的名称&lt;/li>
&lt;li>&lt;strong>port: &lt;!-- raw HTML omitted -->&lt;/strong> #
&lt;ul>
&lt;li>&lt;strong>number: &lt;!-- raw HTML omitted -->&lt;/strong># 指定 service 上的端口号&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>path &lt;!-- raw HTML omitted -->&lt;/strong> #&lt;/li>
&lt;li>pathType&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="tls-object--启用-https-需要配置该字段">tls: &amp;lt;[]Object&amp;gt; # 启用 https 需要配置该字段&lt;/h2>
&lt;ul>
&lt;li>&lt;strong>hosts: &amp;lt;[]STRING&amp;gt;&lt;/strong>#&lt;/li>
&lt;li>&lt;strong>secretName: &lt;!-- raw HTML omitted -->&lt;/strong> # 导入指定的 secret 对象内的数据。该 secret 中包括两个数据：证书和密钥&lt;/li>
&lt;/ul>
&lt;h1 id="简单示例">简单示例&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">apiVersion&lt;/span>: &lt;span style="color:#ae81ff">networking/v1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">kind&lt;/span>: &lt;span style="color:#ae81ff">Ingress&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">metadata&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">cafe-ingress&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">annotations&lt;/span>: &lt;span style="color:#75715e"># 将这些 annotations 添加到特定的 Ingress 对象，以自定义其行为。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">nginx.ingress.kubernetes.io/rewrite-target&lt;/span>: &lt;span style="color:#ae81ff">/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">spec&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">tls&lt;/span>: &lt;span style="color:#75715e">#启用https需要配置该字段&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">hosts&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">cafe.example.com&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">secretName&lt;/span>: &lt;span style="color:#ae81ff">cafe-secret&lt;/span> &lt;span style="color:#75715e">#把secret对象内的数据导入，该secret中包括两个数据：自签的证书和密钥，自签方式详见马哥的书《Kubernetes进阶实战》166页&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">rules&lt;/span>: &lt;span style="color:#75715e">#是一个类似于nginx的7层反向代理的配置&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">host&lt;/span>: &lt;span style="color:#ae81ff">cafe.example.com&lt;/span> &lt;span style="color:#75715e">#(可省略，省略之后，可以使用ip来访问而不用使用域名)指定用户访问的域名，必须是FQDN(完全限定域名)，不能是IP，类似于nginx的service字段&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">http&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">paths&lt;/span>: &lt;span style="color:#75715e"># 用来定义，当用户访问不同资源时，把用户请求代理到不同的后端Service，然后Service再把请求交给Pod&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">#访问cafe.example.com/tea，则把请求代理到tea-svc这个service所拥有的后端pod上；访问cafe.example.com/coffee则把请求代理到名为coffee-svc这个service所拥有的后端pod上&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">path&lt;/span>: &lt;span style="color:#ae81ff">/tea&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">backend&lt;/span>: &lt;span style="color:#75715e">#定义要把哪些后端Pod的IP信息发送给IngressController，如果是IngressController是nginx，那么这几个IP就是upstream的IP&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">service&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">tea-svc&lt;/span> &lt;span style="color:#75715e"># tes-svc 指明用于采集后端后端Pod信息的 service 的名称&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">port&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">number&lt;/span>: &lt;span style="color:#ae81ff">80&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">path&lt;/span>: &lt;span style="color:#ae81ff">/coffee&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">backend&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">service&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">coffee-svc&lt;/span> &lt;span style="color:#75715e"># coffee-svc 指明用于采集后端后端Pod信息的 service 的名称&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">port&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">number&lt;/span>: &lt;span style="color:#ae81ff">80&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">host&lt;/span>: &lt;span style="color:#ae81ff">bakery.example.com&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">http&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">paths&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">path&lt;/span>: &lt;span style="color:#ae81ff">/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ae81ff">.....&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">apiVersion&lt;/span>: &lt;span style="color:#ae81ff">extensions/v1beta1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">kind&lt;/span>: &lt;span style="color:#ae81ff">Ingress&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">metadata&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">myapp&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">annotations&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">nginx.ingress.kubernetes.io/rewrite-target&lt;/span>: &lt;span style="color:#ae81ff">/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">spec&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">rules&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">host&lt;/span>: &lt;span style="color:#ae81ff">myapp.example.com&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">http&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">paths&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">path&lt;/span>: &lt;span style="color:#ae81ff">/myapp&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">backend&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">serviceName&lt;/span>: &lt;span style="color:#ae81ff">myapp&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">servicePort&lt;/span>: &lt;span style="color:#ae81ff">80&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Docs: Service Manifests 详解</title><link>https://desistdaydream.github.io/docs/10.%E4%BA%91%E5%8E%9F%E7%94%9F/2.3.Kubernetes-%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92%E7%B3%BB%E7%BB%9F/1.API-Resource-%E4%B8%8E-Object/API-%E5%8F%82%E8%80%83/%E6%9C%8D%E5%8A%A1%E8%B5%84%E6%BA%90/Service-Manifests-%E8%AF%A6%E8%A7%A3/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/10.%E4%BA%91%E5%8E%9F%E7%94%9F/2.3.Kubernetes-%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92%E7%B3%BB%E7%BB%9F/1.API-Resource-%E4%B8%8E-Object/API-%E5%8F%82%E8%80%83/%E6%9C%8D%E5%8A%A1%E8%B5%84%E6%BA%90/Service-Manifests-%E8%AF%A6%E8%A7%A3/</guid><description>
&lt;h1 id="概述">概述&lt;/h1>
&lt;blockquote>
&lt;p>参考：&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.21/#service-v1-core">API 文档单页&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://kubernetes.io/docs/reference/kubernetes-api/service-resources/service-v1/">官方文档，参考-Kubernetes API-服务资源-Service&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://kubernetes.io/docs/reference/kubernetes-api/service-resources/endpoints-v1/">官方文档，参考-Kubernetes API-服务资源-Endpoint&lt;/a>&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h1 id="service-manifests-详解">Service Manifests 详解&lt;/h1>
&lt;h2 id="manifest-中的顶层字段">Manifest 中的顶层字段&lt;/h2>
&lt;ul>
&lt;li>apiVersion: v1 # API 版本，基础字段必须要有&lt;/li>
&lt;li>kind: Service # 指明要创建的资源类型为 Service，基础字段必须要有&lt;/li>
&lt;li>&lt;a href="#metadata">metadata: &amp;lt;Object&amp;gt;&lt;/a>&lt;/li>
&lt;li>&lt;a href="#spec">spec: &amp;lt;Object&amp;gt;&lt;/a>&lt;/li>
&lt;li>&lt;a href="#status">status: &amp;lt;Object&amp;gt;&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="metadata">metadata&lt;/h2>
&lt;p>&lt;strong>metadata&lt;/strong> 字段描述该 Service 资源的元数据，其中 name 是必须要写明的元数据项。该字段内容详见通用定义的 &lt;a href="https://desistdaydream.github.io/docs/10.%E4%BA%91%E5%8E%9F%E7%94%9F/2.3.Kubernetes%20%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92%E7%B3%BB%E7%BB%9F/1.API%20Resource%20%E4%B8%8E%20Object/API%20%E5%8F%82%E8%80%83/Common%20Definitions(%E9%80%9A%E7%94%A8%E5%AE%9A%E4%B9%89)/ObjectMeta.md">ObjectMeta&lt;/a>&lt;/p>
&lt;p>&lt;strong>name: STRING&lt;/strong> # 指定该资源的名字&lt;/p>
&lt;h2 id="spec">spec&lt;/h2>
&lt;p>&lt;strong>spec&lt;/strong> 字段描述该 Service 的规格(specification)&lt;/p>
&lt;p>&lt;strong>clusterIP: STRING&lt;/strong> # 手动给该 Service 分配 IP，该 IP 在服务创建后无法手动修改，可以设置为 None，变成无头 service，这时候请求不由 service 处理，直接通过 service 名称转发到后端的 Pod&lt;/p>
&lt;p>&lt;strong>ports: &amp;lt;[]OBJECT&amp;gt;&lt;/strong>&lt;/p>
&lt;p> - protocol: TCP # 将 service 的端口映射到 pod 的端口，使用 TCP 协议
   nodePort: NUM # 指明 Service 通过 k8s 集群中的那个端口对外提供服务，默认随机从 30000-32767 中随机分配(注：该字段只有 type 为 NodePort 的时候才有作用)
   port: NUM # 指明该 service 所使用的端口
   targetPort: XXX # 指明后端 Pod 的端口&lt;/p>
&lt;p>&lt;strong>selector: &amp;lt;map[STRING][STRING]&amp;gt;&lt;/strong> # 通过&lt;a href="https://desistdaydream.github.io/docs/10.%E4%BA%91%E5%8E%9F%E7%94%9F/2.3.Kubernetes%20%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92%E7%B3%BB%E7%BB%9F/1.API%20Resource%20%E4%B8%8E%20Object/Object%20%E7%AE%A1%E7%90%86/Label%20and%20Selector(%E6%A0%87%E7%AD%BE%E5%92%8C%E9%80%89%E6%8B%A9%E5%99%A8)/Label%20and%20Selector(%E6%A0%87%E7%AD%BE%E5%92%8C%E9%80%89%E6%8B%A9%E5%99%A8).md">Label and Selector(标签和选择器)&lt;/a> 选择哪些 Pod 是该 Service 的后端。&lt;/p>
&lt;p>&lt;strong>sessionAffinity: &amp;lt;ClientIP|None&amp;gt;&lt;/strong> # 设置会话亲和度，当为 None 的时候为同一个客户端的访问都会指向同一个 Pod，ClientIP 为进行负载调度&lt;/p>
&lt;p>&lt;strong>type: STRING&lt;/strong> #&lt;/p>
&lt;h1 id="endpoints-manifests-详解">Endpoints Manifests 详解&lt;/h1>
&lt;h2 id="manifest-中的顶层字段-1">Manifest 中的顶层字段&lt;/h2>
&lt;ul>
&lt;li>apiVersion: v1&lt;/li>
&lt;li>kind: Endpoints&lt;/li>
&lt;li>&lt;a href="#metadata">metadata: OBJECT&lt;/a>&lt;/li>
&lt;li>&lt;a href="#subsets">subsets: []OBJECT&lt;/a>&lt;/li>
&lt;li>status: OBJECT&lt;/li>
&lt;/ul>
&lt;h2 id="metadata-1">metadata&lt;/h2>
&lt;p>name: NAME # 与 Endpoints 所关联的 Service 的 name 想同&lt;/p>
&lt;h2 id="subsets">subsets&lt;/h2>
&lt;p>subsets 描述子集&lt;/p>
&lt;ul>
&lt;li>&lt;strong>addresses: []OBJECT&lt;/strong>
&lt;ul>
&lt;li>&lt;strong>ip: STRING&lt;/strong> #&lt;/li>
&lt;li>&lt;strong>hostname: STRING&lt;/strong> #&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>ports: []OBJECT&lt;/strong> #
&lt;ul>
&lt;li>&lt;strong>port: INT32&lt;/strong> # Endpoint 的端口&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h1 id="manifests-样例">Manifests 样例&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">apiVersion&lt;/span>: &lt;span style="color:#ae81ff">v1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">kind&lt;/span>: &lt;span style="color:#ae81ff">Service&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">metadata&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">labels&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">myapp&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">myapp&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">spec&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">http&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">port&lt;/span>: &lt;span style="color:#ae81ff">80&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">targetPort&lt;/span>: &lt;span style="color:#ae81ff">80&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">nodePort&lt;/span>: &lt;span style="color:#ae81ff">30080&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">type&lt;/span>: &lt;span style="color:#ae81ff">NodePort&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">selector&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">myapp&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="service-绑定集群外部设备的-endpoints">service 绑定集群外部设备的 endpoints&lt;/h2>
&lt;p>需要手动添加 endpoints&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">apiVersion&lt;/span>: &lt;span style="color:#ae81ff">v1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">kind&lt;/span>: &lt;span style="color:#ae81ff">Service&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">metadata&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">external-metrics-service&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">namespace&lt;/span>: &lt;span style="color:#ae81ff">monitoring&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">labels&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">prometheus&lt;/span>: &lt;span style="color:#ae81ff">external-metrics&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">spec&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">port&lt;/span>: &lt;span style="color:#ae81ff">9100&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>---
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">apiVersion&lt;/span>: &lt;span style="color:#ae81ff">v1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">kind&lt;/span>: &lt;span style="color:#ae81ff">Endpoints&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">metadata&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">external-metrics-service&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">namespace&lt;/span>: &lt;span style="color:#ae81ff">monitoring&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">labels&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">prometheus&lt;/span>: &lt;span style="color:#ae81ff">external-metrics&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">subsets&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>- &lt;span style="color:#f92672">addresses&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">ip&lt;/span>: &lt;span style="color:#ae81ff">10.10.100.101&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">nodeName&lt;/span>: &lt;span style="color:#ae81ff">lch-test&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">ip&lt;/span>: &lt;span style="color:#ae81ff">10.10.100.171&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">nodeName&lt;/span>: &lt;span style="color:#ae81ff">nfs-storage&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">port&lt;/span>: &lt;span style="color:#ae81ff">9100&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Docs: 服务资源</title><link>https://desistdaydream.github.io/docs/10.%E4%BA%91%E5%8E%9F%E7%94%9F/2.3.Kubernetes-%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92%E7%B3%BB%E7%BB%9F/1.API-Resource-%E4%B8%8E-Object/API-%E5%8F%82%E8%80%83/%E6%9C%8D%E5%8A%A1%E8%B5%84%E6%BA%90/%E6%9C%8D%E5%8A%A1%E8%B5%84%E6%BA%90/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/10.%E4%BA%91%E5%8E%9F%E7%94%9F/2.3.Kubernetes-%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92%E7%B3%BB%E7%BB%9F/1.API-Resource-%E4%B8%8E-Object/API-%E5%8F%82%E8%80%83/%E6%9C%8D%E5%8A%A1%E8%B5%84%E6%BA%90/%E6%9C%8D%E5%8A%A1%E8%B5%84%E6%BA%90/</guid><description>
&lt;h1 id="概述">概述&lt;/h1>
&lt;blockquote>
&lt;p>参考：&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://kubernetes.io/docs/reference/kubernetes-api/service-resources/">官方文档，参考-KubernetesAPI-服务资源&lt;/a>&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h1 id="services-resources">Services Resources&lt;/h1>
&lt;h2 id="servicehttpskubernetesiodocsreferencekubernetes-apiservice-resourcesservice-v1">&lt;a href="https://kubernetes.io/docs/reference/kubernetes-api/service-resources/service-v1/">Service&lt;/a>&lt;/h2>
&lt;p>Service is a named abstraction of software service (for example, mysql) consisting of local port (for example 3306) that the proxy listens on, and the selector that determines which pods will answer requests sent through the proxy.&lt;/p>
&lt;h2 id="endpointshttpskubernetesiodocsreferencekubernetes-apiservice-resourcesendpoints-v1">&lt;a href="https://kubernetes.io/docs/reference/kubernetes-api/service-resources/endpoints-v1/">Endpoints&lt;/a>&lt;/h2>
&lt;p>Endpoints is a collection of endpoints that implement the actual service.&lt;/p>
&lt;h2 id="endpointslicehttpskubernetesiodocsreferencekubernetes-apiservice-resourcesendpoint-slice-v1">&lt;a href="https://kubernetes.io/docs/reference/kubernetes-api/service-resources/endpoint-slice-v1/">EndpointSlice&lt;/a>&lt;/h2>
&lt;p>EndpointSlice represents a subset of the endpoints that implement a service.&lt;/p>
&lt;h2 id="ingresshttpskubernetesiodocsreferencekubernetes-apiservice-resourcesingress-v1">&lt;a href="https://kubernetes.io/docs/reference/kubernetes-api/service-resources/ingress-v1/">Ingress&lt;/a>&lt;/h2>
&lt;p>Ingress is a collection of rules that allow inbound connections to reach the endpoints defined by a backend.&lt;/p>
&lt;h2 id="ingressclasshttpskubernetesiodocsreferencekubernetes-apiservice-resourcesingress-class-v1">&lt;a href="https://kubernetes.io/docs/reference/kubernetes-api/service-resources/ingress-class-v1/">IngressClass&lt;/a>&lt;/h2>
&lt;p>IngressClass represents the class of the Ingress, referenced by the Ingress Spec.&lt;/p></description></item></channel></rss>