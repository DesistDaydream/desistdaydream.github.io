<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Kubernetes 部署与清理 on 断念梦的站点</title><link>https://desistdaydream.github.io/docs/10.%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/Kubernetes-%E9%83%A8%E7%BD%B2%E4%B8%8E%E6%B8%85%E7%90%86/</link><description>Recent content in Kubernetes 部署与清理 on 断念梦的站点</description><generator>Hugo</generator><language>zh-cn</language><atom:link href="https://desistdaydream.github.io/docs/10.%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/Kubernetes-%E9%83%A8%E7%BD%B2%E4%B8%8E%E6%B8%85%E7%90%86/index.xml" rel="self" type="application/rss+xml"/><item><title>Kubernetes 部署与清理</title><link>https://desistdaydream.github.io/docs/10.%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/Kubernetes-%E9%83%A8%E7%BD%B2%E4%B8%8E%E6%B8%85%E7%90%86/Kubernetes-%E9%83%A8%E7%BD%B2%E4%B8%8E%E6%B8%85%E7%90%86/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/10.%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/Kubernetes-%E9%83%A8%E7%BD%B2%E4%B8%8E%E6%B8%85%E7%90%86/Kubernetes-%E9%83%A8%E7%BD%B2%E4%B8%8E%E6%B8%85%E7%90%86/</guid><description>概述 参考：
官方文档，快速开始 GitHub 项目，easzlab/kubeasz(ansible 部署项目) 官方文档，入门-生产环境-使用部署工具安装 Kubernetes-使用 kubeadm 引导集群-使用 kubeadm 支持 IPv4 与 IPv6 双栈 注意事项：
不要使用 nftables Kubernetes 关联文件 下面这些是逐步总结的，应该是准确的，但是没有官方说明
/etc/kubernetes/ # 系统组件运行时配置
/var/lib/etcd/ # Etcd 数据目录
/var/lib/kubelet/ # Kubelet 运行时配置及数据持久化目录
CNI 目录
/etc/cni/net.d/# 默认配置文件保存目录 /opt/cni/bin/ # 默认 CNI 插件保存目录 /var/lib/cni/ # 默认 CNI 运行时产生的数据目录 部署 Kubernetes 集群 配置安装环境 (可选)更新内核以解决 ipvs 的(在 k8s-1.11.0 版本)BUG [参考内核部署文档](1.Linux%20Kernel.md Kernel.md) 关闭 iptables 和 firewalld 服务 由于 kubernetes 的 kube-proxy 会接管防火墙生成相关规则，所以最好关闭系统自带的 systemctl stop firewalld.</description></item><item><title>kubernetes 二进制方式安装说明</title><link>https://desistdaydream.github.io/docs/10.%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/Kubernetes-%E9%83%A8%E7%BD%B2%E4%B8%8E%E6%B8%85%E7%90%86/kubernetes-%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%B9%E5%BC%8F%E5%AE%89%E8%A3%85%E8%AF%B4%E6%98%8E/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/10.%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/Kubernetes-%E9%83%A8%E7%BD%B2%E4%B8%8E%E6%B8%85%E7%90%86/kubernetes-%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%B9%E5%BC%8F%E5%AE%89%E8%A3%85%E8%AF%B4%E6%98%8E/</guid><description>首先需要明确几个概念，kubelet负责本节点容器的生命周期管理，那么在master节点上，如果只通过二进制文件运行 apiserver、controller-manager、scheduler，则无需部署 kubelet
所以，按照大体可以划分这么几块：
etcd节点：etcd(可部署在master节点上)。高可用至少需要3台设备
master节点：apiserver、controller-manager、scheduler。高可用至少需要2台设备。apiserver 需要与 etcd 进行交互
node节点：kubelet、CNI插件、kube-proxy</description></item><item><title>创建高可用 Kubernetes 集群</title><link>https://desistdaydream.github.io/docs/10.%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/Kubernetes-%E9%83%A8%E7%BD%B2%E4%B8%8E%E6%B8%85%E7%90%86/%E5%88%9B%E5%BB%BA%E9%AB%98%E5%8F%AF%E7%94%A8-Kubernetes-%E9%9B%86%E7%BE%A4/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/10.%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/Kubernetes-%E9%83%A8%E7%BD%B2%E4%B8%8E%E6%B8%85%E7%90%86/%E5%88%9B%E5%BB%BA%E9%AB%98%E5%8F%AF%E7%94%A8-Kubernetes-%E9%9B%86%E7%BE%A4/</guid><description>概述 参考：
官方文档，入门-生产环境-使用部署工具安装 Kubernetes-使用 kubeadm 引导集群-使用 kubeadm 创建高可用集群 https://kubernetes.io/docs/setup/independent/high-availability/ Kubeadm GitHub 项目,高科用性注意事项 keepalived 和 haproxy kube-vip kube-vip 官网 想要让 Kubernets 的 Master 可以高可用，本质上就是让 API Server 高可用，也就是为 API Server 创建负载均衡，通过 VIP 来访问 API Server。
有多种方式可以实现 Kubernetes Master 节点的高可用
在各个 Master 上负载均衡各个 Master Keepalived kube-vip 在每个 Node 上负载均衡各个 Master sealos 创建负载均衡 Keepalived 方式 官方推荐版本的 keepalived 的配置
/etc/keepalived/keepalived.conf 在所有主节点上创建以下配置文件： ! Configuration File for keepalived global_defs { router_id k8s-master-dr script_user root enable_script_security } vrrp_script check_apiserver { script &amp;#34;/etc/keepalived/check_apiserver.</description></item></channel></rss>