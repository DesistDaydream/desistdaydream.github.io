<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>断念梦的站点 – 对象存储</title><link>https://desistdaydream.github.io/docs/5.%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/%E5%AD%98%E5%82%A8/%E5%AD%98%E5%82%A8%E7%9A%84%E8%83%BD%E5%8A%9B/%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8/</link><description>Recent content in 对象存储 on 断念梦的站点</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><atom:link href="https://desistdaydream.github.io/docs/5.%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/%E5%AD%98%E5%82%A8/%E5%AD%98%E5%82%A8%E7%9A%84%E8%83%BD%E5%8A%9B/%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs: 对象存储</title><link>https://desistdaydream.github.io/docs/5.%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/%E5%AD%98%E5%82%A8/%E5%AD%98%E5%82%A8%E7%9A%84%E8%83%BD%E5%8A%9B/%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8/%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8/</link><pubDate>Tue, 26 Sep 2023 08:25:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/5.%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/%E5%AD%98%E5%82%A8/%E5%AD%98%E5%82%A8%E7%9A%84%E8%83%BD%E5%8A%9B/%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8/%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8/</guid><description>
&lt;h1 id="概述">概述&lt;a class="td-heading-self-link" href="#%e6%a6%82%e8%bf%b0" aria-label="Heading self-link">&lt;/a>&lt;/h1>
&lt;blockquote>
&lt;p>参考：&lt;/p>
&lt;ul>
&lt;li>&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h1 id="simple-storage-service简单存储服务">Simple Storage Service(简单存储服务)&lt;a class="td-heading-self-link" href="#simple-storage-service%e7%ae%80%e5%8d%95%e5%ad%98%e5%82%a8%e6%9c%8d%e5%8a%a1" aria-label="Heading self-link">&lt;/a>&lt;/h1>
&lt;blockquote>
&lt;p>参考：&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://docs.aws.amazon.com/zh_cn/AmazonS3/latest/dev/Welcome.html">AWS 官方文档&lt;/a>&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;p>&lt;strong>Simple Storage Service(简单存储服务，简称 S3)&lt;/strong> 最早是由 AWS(亚马逊) 提出的一种对象存储服务。现在，S3 几乎称为对象存储的事实标准，各厂家基本上都会兼容 S3。&lt;/p></description></item><item><title>Docs: 对象存储，为什么那么火？</title><link>https://desistdaydream.github.io/docs/5.%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/%E5%AD%98%E5%82%A8/%E5%AD%98%E5%82%A8%E7%9A%84%E8%83%BD%E5%8A%9B/%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8/%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8%E4%B8%BA%E4%BB%80%E4%B9%88%E9%82%A3%E4%B9%88%E7%81%AB/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://desistdaydream.github.io/docs/5.%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/%E5%AD%98%E5%82%A8/%E5%AD%98%E5%82%A8%E7%9A%84%E8%83%BD%E5%8A%9B/%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8/%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8%E4%B8%BA%E4%BB%80%E4%B9%88%E9%82%A3%E4%B9%88%E7%81%AB/</guid><description>
&lt;p>参考：&lt;a href="https://zhuanlan.zhihu.com/p/166289089">知乎原文&lt;/a>&lt;/p>
&lt;p>小枣君给大家详细介绍了数据存储技术的基本知识，其中重点对 DAS、SAN 和 NAS 技术进行了对比分析。&lt;/p>
&lt;p>我们知道，在很长的一段时间里，这三种架构几乎统治了数据存储市场。所有行业用户的数据存储需求，都是在这三者中进行选择。&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/wbbbe6/1616133273181-f7a575c1-6902-45b7-bbfe-70fe6aba37dd.jpeg" alt="">&lt;/p>
&lt;p>然而，随着时代的发展，一种新的数据存储形态诞生，开始挑战前面三者的垄断地位。&lt;/p>
&lt;p>没错，它就是云计算时代存储技术的新网红——&lt;strong>对象存储&lt;/strong>。(这里描述有问题，对象存储和 SAN、NAS、DAS 不是一个级别的，准确说，应该用 分布式存储与 这三个对比)&lt;/p>
&lt;p>对象存储，也称为“面向对象的存储”，英文是 Object-based Storage。现在很多云厂商，也直接称之为“云存储”。&lt;/p>
&lt;p>不同的云厂商对它有不同的英文缩写命名。例如阿里云把自家的对象存储服务叫做 OSS，华为云叫 OBS，腾讯云叫 COS，七牛叫 Kodo，百度叫 BOS，网易叫 NOS……五花八门，反正都是一个技术。&lt;/p>
&lt;p>之前小枣君介绍过，DAS 和 SAN 是基于物理块的存储方式，而 NAS 是基于文件的存储方式。&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/wbbbe6/1616133273236-5e0f57b3-10df-44c2-8d19-284bf2256a33.jpeg" alt="">&lt;/p>
&lt;p>在 DAS 和 SAN 中，存储资源就像一块一块的硬盘，直接挂载在主机上，我们称之为&lt;strong>块存储&lt;/strong>。&lt;/p>
&lt;p>而在 NAS 中，呈现出来的是一个基于文件系统的目录架构，有目录、子目录、孙目录、文件，我们称之为&lt;strong>文件存储&lt;/strong>。&lt;/p>
&lt;p>文件存储的最大特点，就是所有存储资源都是多级路径方式进行访问的。例如：&lt;/p>
&lt;pre>&lt;code>C:\Program Files (x86)\Tencent\WeChat\WeChat.exe
\\NJUST-Server\学习资料\通信原理\第一章作业.doc
&lt;/code>&lt;/pre>
&lt;p>20 世纪末，随着互联网的爆发，数据存储需求发生了两个重大的变化。&lt;/p>
&lt;p>第一，就是数据量爆炸式增长。&lt;/p>
&lt;p>原因我就不用说了吧？大家可以瞅瞅自己的硬盘，都藏了些什么。&lt;/p>
&lt;p>Web 应用的崛起、社交需求的刺激，极大地推动了多媒体内容的创作和分享。人们开始上传大量的照片、音乐、视频，加剧了数据量的爆发。&lt;/p>
&lt;p>此外，信息技术的发展、企业数字化的落地，也产生了大量的数据，不断吞食着存储资源。&lt;/p>
&lt;p>第二，是非结构化数据的占比显著增加。&lt;/p>
&lt;p>什么是非结构化数据？&lt;/p>
&lt;p>举个例子大家就明白了。我们经常做的 excel 表格，姓名、身高、体重、年龄、性别，这种用二维表结构可以进行逻辑表达的数据，就是结构化数据。&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/wbbbe6/1616133273202-b0e35b67-abfa-480d-b9dd-25b8ed49220e.jpeg" alt="">&lt;/p>
&lt;p>结构化数据&lt;/p>
&lt;p>而图像、音频、视频、word 文章、演示胶片这样的数据，就是非结构化数据。&lt;/p>
&lt;p>根据此前的预测，到 2020 年（也就是今年），全球数据总量的 80%，将是非结构化数据。&lt;/p>
&lt;p>面对这两大趋势，因为本身技术和架构的限制，DAS、SAN 和 NAS 无法进行有效应对。&lt;/p>
&lt;p>于是，专家们就搞出了&lt;strong>对象存储&lt;/strong>。&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/wbbbe6/1616133273200-8213331f-1ca3-48dc-8fe3-2d0c67c4bf8d.jpeg" alt="">&lt;/p>
&lt;p>虽然我们说对象存储是新网红，但实际上它诞生的时间并不算短。早在 1996 年，美国卡内基梅隆大学就将对象存储作为一个研究项目提出来。随后，加州大学伯克利分校也有推出类似的项目。&lt;/p>
&lt;p>2002 年，Filepool 公司推出了基于内容可寻址技术的 Centera 系统，算是比较早期的对象存储系统。&lt;/p>
&lt;p>2006 年，美国 Amazon 公司发布&lt;strong>AWS S3（Simple Storage Service）服务&lt;/strong>，正式将对象存储作为一项云存储服务，引入云计算领域，从此开启了对象存储的黄金时代。&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/wbbbe6/1616133273198-c663c345-b883-4bf9-a567-7034cfe2c32d.jpeg" alt="">&lt;/p>
&lt;p>S3 几乎成为对象存储的事实标准 各厂家基本上都会兼容 S3&lt;/p>
&lt;h2 id="-对象存储和块存储文件存储的区别">&lt;strong>▉ 对象存储和块存储、文件存储的区别&lt;/strong>&lt;a class="td-heading-self-link" href="#-%e5%af%b9%e8%b1%a1%e5%ad%98%e5%82%a8%e5%92%8c%e5%9d%97%e5%ad%98%e5%82%a8%e6%96%87%e4%bb%b6%e5%ad%98%e5%82%a8%e7%9a%84%e5%8c%ba%e5%88%ab" aria-label="Heading self-link">&lt;/a>&lt;/h2>
&lt;p>说了半天，对象存储到底是一个什么样的技术？它和块存储、文件存储有什么区别？&lt;/p>
&lt;p>首先，第一点，千万不要去看百度百科上面“对象存储”的定义，否则，你可能会怀疑人生。&lt;/p>
&lt;p>想要了解对象存储，最简单直接的办法，就是从实际使用体验上进行对比。&lt;/p>
&lt;p>**对象存储的底层硬件介质，依然是硬盘，**和块存储、文件存储没有区别。&lt;/p>
&lt;p>而对象存储架构在底层硬件之上的系统，和两者完全不同。（下文会详细介绍系统架构）&lt;/p>
&lt;p>不同的软件，带来了完全不同的使用体验：&lt;/p>
&lt;p>块存储，操作对象是磁盘。存储协议是 SCSI、iSCSI、FC。&lt;/p>
&lt;p>以 SCSI 为例，主要接口命令有 Read/Write/Read Capacity/Inquiry 等等。&lt;/p>
&lt;p>文件存储，操作对象是文件和文件夹。存储协议是 NFS、SAMBA（SMB）、POSIX 等。&lt;/p>
&lt;p>以 NFS（大家应该都用过“网上邻居”共享文件吧？就是那个）为例，文件相关的接口命令包括：READ/WRITE/CREATE/REMOVE/RENAME/LOOKUP/ACCESS 等等，文件夹相关的接口命令包括：MKDIR/RMDIR/READDIR 等等。&lt;/p>
&lt;p>&lt;strong>对象存储，主要操作对象是对象（Object）。存储协议是 S3、Swift 等。&lt;/strong>&lt;/p>
&lt;p>以 S3 为例，主要接口命令有 PUT/GET/DELETE 等。&lt;/p>
&lt;p>看出来了吧？接口命令非常简洁，没有那种目录树的概念。&lt;/p>
&lt;p>在对象存储系统里，你不能直接打开/修改文件，只能先下载、修改，再上传文件。（如果大家用过百度网盘或 ftp 服务，一定可以秒懂。）&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/wbbbe6/1616133273192-d2d46fbe-05f5-4d0e-b02b-a021b7a0419d.jpeg" alt="">&lt;/p>
&lt;h2 id="-对象存储中的数据组成">&lt;strong>▉ 对象存储中的数据组成&lt;/strong>&lt;a class="td-heading-self-link" href="#-%e5%af%b9%e8%b1%a1%e5%ad%98%e5%82%a8%e4%b8%ad%e7%9a%84%e6%95%b0%e6%8d%ae%e7%bb%84%e6%88%90" aria-label="Heading self-link">&lt;/a>&lt;/h2>
&lt;p>对象存储呈现出来的是一个“桶”（bucket），你可以往“桶”里面放“对象（Object）”。这个对象包括三个部分：Key、Data、Metadata。&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/wbbbe6/1616133273218-2fd2e5cd-b915-49d3-ad87-6b91816d9f1f.jpeg" alt="">&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Key&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>可以理解文件名，是该对象的全局唯一标识符（UID）。&lt;/p>
&lt;p>Key 是用于检索对象，服务器和用户不需要知道数据的物理地址，也能通过它找到对象。这种方法极大地简化了数据存储。&lt;/p>
&lt;p>下面这行，就是一个对象的地址范例：&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/wbbbe6/1616133273217-f13eaa87-432a-4d34-bf25-449679d577cb.jpeg" alt="">&lt;/p>
&lt;p>看上去就是一个 URL 网址。如果该对象被设置为“公开”，所有互联网用户都可以通过这个地址访问它。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Data&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>也就是用户数据本体。这个不用解释了。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Metadata&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>Metadata 叫做&lt;strong>元数据&lt;/strong>，它是对象存储一个非常独特的概念。&lt;/p>
&lt;p>元数据有点类似数据的标签，标签的条目类型和数量是没有限制的，可以是对象的各种描述信息。&lt;/p>
&lt;p>举个例子，如果对象是一张人物照片，那么元数据可以是姓名、性别、国籍、年龄、拍摄地点、拍摄时间等。&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/wbbbe6/1616133273262-bd582654-8a66-4da1-b17a-61c85d700e5e.jpeg" alt="">&lt;/p>
&lt;p>元数据可以有很多&lt;/p>
&lt;p>在传统的文件存储里，这类信息属于文件本身，和文件一起封装存储。而对象存储中，元数据是独立出来的，并不在数据内部封装。&lt;/p>
&lt;p>元数据的好处非常明显，可以大大加快对象的排序，还有分类和查找。&lt;/p>
&lt;h2 id="-对象存储的架构">&lt;strong>▉ 对象存储的架构&lt;/strong>&lt;a class="td-heading-self-link" href="#-%e5%af%b9%e8%b1%a1%e5%ad%98%e5%82%a8%e7%9a%84%e6%9e%b6%e6%9e%84" aria-label="Heading self-link">&lt;/a>&lt;/h2>
&lt;p>对象存储的架构是怎样的呢？如下图所示，分为 3 个主要部分：&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/wbbbe6/1616133273271-3fb40c2c-52e9-40a4-8050-486d34c099c4.jpeg" alt="">&lt;/p>
&lt;p>对象存储的简单架构示意图&lt;/p>
&lt;ul>
&lt;li>&lt;strong>OSD 对象存储设备&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>这是对象存储的核心，具有自己的 CPU、内存、网络和磁盘系统。它的主要功能当然是存储数据。同时，它还会利用自己的算力，优化数据分布，并且支持数据预读取，提升磁盘性能。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>MDS 元数据服务器&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>它控制 Client 和 OSD 的交互，还会管理着限额控制、目录和文件的创建与删除，以及访问控制权限。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Client 客户端&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>提供文件系统接口，方便外部访问。&lt;/p>
&lt;p>根据上面的架构可以看出，对象存储系统可以是一个提供海量存储服务的分布式架构。&lt;/p>
&lt;h2 id="-对象存储的优点">&lt;strong>▉ 对象存储的优点&lt;/strong>&lt;a class="td-heading-self-link" href="#-%e5%af%b9%e8%b1%a1%e5%ad%98%e5%82%a8%e7%9a%84%e4%bc%98%e7%82%b9" aria-label="Heading self-link">&lt;/a>&lt;/h2>
&lt;p>对象存储的优点很多，简单归纳如下：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>容量无限大&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>对象存储的容量是 EB 级以上。EB 有多大？大家的硬盘普遍是 TB 级别。1EB 约等于 1TB 的一百万倍，请自行脑补&amp;hellip;&lt;/p>
&lt;p>对象存储的所有业务、存储节点采用分布式集群方式工作，各功能节点、集群都可以独立扩容。从理论上来说，某个对象存储系统或单个桶（bucket），并没有总数据容量和对象数量的限制。&lt;/p>
&lt;p>换句话说，只要你有足够的 money，服务商就可以不停地往架构里增加资源，这个存储空间就是无限的。&lt;/p>
&lt;p>你可以根据自身需求购买相应大小的对象存储空间。如果需要调整大小，也是支持弹性伸缩的，你不要进行数据迁移和人工干预。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>数据安全可靠&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>对象存储采用了分布式架构，对数据进行多设备冗余存储（至少三个以上节点），实现异地容灾和资源隔离。&lt;/p>
&lt;p>根据云服务商的承诺，数据可靠性至少可以达到 99.999999999%（不用数了，一共 11 个 9）。这意味着，1000 亿个文件里，每月最多只会有 1 个文件发生数据丢失。这比一个人被陨石击中的概率还要小 143000 倍。&lt;/p>
&lt;p>数据访问方面，所有的桶和对象都有 ACL 等访问控制策略，所有的连接都支持 SSL 加密，OBS 系统会对访问用户进行身份鉴权。因为数据是分片存储在不同硬盘上的，所以即使有坏人偷了硬盘，也无法还原出完整的对象数据。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>使用方便&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>对于用户来说，对象存储是一个非常方便的存储方式。&lt;/p>
&lt;p>很多人把它比喻为“代客泊车”，你只需要把车扔给他，他给你一个凭证，你通过凭证取车就可以了。你不需要知道车库的布局，也不需要自己去费力停放。&lt;/p>
&lt;p>数据的存取方法也非常灵活多样。除了前面说的可以使用网页（基于 http）直接访问之外，大部分云服务提供商都有自己的图形化界面客户端工具，用户存取数据就像用网盘一样。&lt;/p>
&lt;p>&lt;img src="https://notes-learning.oss-cn-beijing.aliyuncs.com/wbbbe6/1616133273260-803eb990-fd23-44c9-822d-0800bd6c9ab4.jpeg" alt="">&lt;/p>
&lt;p>腾讯云的对象存储工具界面&lt;/p>
&lt;p>事实上，大部分的对象存储需求，并不是个人用户买来当网盘用，而且企业或政府用户用于系统数据存储。例如网站、App 的静态图片、音频、视频，还有企业系统的归档数据等。&lt;/p>
&lt;p>像这种数据，是通过程序内部的接口调用的。对象存储提供开放的 REST API 接口。程序员在开发应用时，直接把存储参数写进代码，就可以通过 API 接口调用对象存储里的数据。相比文件存储那一串串的路径，对象存储要方便很多。&lt;/p>
&lt;h2 id="-对象存储的应用场景">&lt;strong>▉ 对象存储的应用场景&lt;/strong>&lt;a class="td-heading-self-link" href="#-%e5%af%b9%e8%b1%a1%e5%ad%98%e5%82%a8%e7%9a%84%e5%ba%94%e7%94%a8%e5%9c%ba%e6%99%af" aria-label="Heading self-link">&lt;/a>&lt;/h2>
&lt;p>目前国内有大量的云服务提供商，他们把对象存储当作云存储在卖。&lt;/p>
&lt;p>他们通常会把存储业务分为 3 个等级，即标准型、低频型、归档型。对应的应用场景如下：&lt;/p>
&lt;p>&lt;strong>标准类型&lt;/strong>：移动应用 | 大型网站 | 图片分享 | 热点音视频&lt;/p>
&lt;p>&lt;strong>低频访问类型&lt;/strong>：移动设备 | 应用与企业数据备份 | 监控数据 | 网盘应用&lt;/p>
&lt;p>&lt;strong>归档类型&lt;/strong>：各种长期保存的档案数据 | 医疗影像 | 影视素材&lt;/p>
&lt;p>根据估算，目前全球互联网 70%以上的热点数据是保存在对象存储系统中的。&lt;/p>
&lt;p>对象存储虽然看上去很好很强大，但也不是没有缺点。它最大的缺点，和它的工作模式有关。&lt;/p>
&lt;p>它是那种把整个数据取出来，修改，再放回去的模式，不支持直接在存储上修改，哪怕只是加一行数据，都不行。所以，它不适合存储需要频繁擦写的数据（例如关系型数据库的数据）。&lt;/p>
&lt;p>在数据的一致性保证上，对象存储也存在先天的不足。不过，据说目前技术上已经有了很大改进。&lt;/p>
&lt;p>好啦，以上就是关于对象存储的全部内容。感谢大家的耐心观看，如果觉得有所收获，请记得帮小枣君点赞、转发！我们下期再见！&lt;/p></description></item></channel></rss>