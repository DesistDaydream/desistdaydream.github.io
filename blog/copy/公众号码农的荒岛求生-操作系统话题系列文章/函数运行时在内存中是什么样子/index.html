<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=zh-cn class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.120.4"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>函数运行时在内存中是什么样子？ | 断念梦</title>
<meta name=description content="参考：公众号,码农的荒岛求生
在开始本篇的内容前，我们先来思考几个问题。
我们先来看一段简单的代码：
void func(int a) { if (a &amp;gt; 100000000) return; int arr[100] = {0}; func(a + 1); }
你能看出这段代码会有什么问题吗？
我们在上一篇文章《高性能高并发服务器是如何实现的》中提到了一项关键技术——协程，你知道协程的本质是什么吗？有的同学可能会说是用户态线程，那么什么是用户态线程，这是怎么实现的？
函数运行起来后在内存中是什么样子？
这几个问题看似没什么关联，但这背后都指向一样东西，这就是所谓的函数运行时栈，run time stack。
接下来我们就好好看看到底什么是函数运行时栈，为什么彻底理解函数运行时栈对程序员来说非常重要。
从进程、线程到函数调用
汽车在高速上行驶时有很多信息，像速度、位置等等，通过这些信息我们可以直观的感受汽车的运行时状态。
同样的，程序在运行时也有很多信息，像有哪些程序正在运行、这些程序执行到了哪里等等，通过这些信息我们可以直观的感受系统中程序运行的状态。
其中，我们创造了进程、线程这样的概念来记录有哪些程序正在运行，关于进程和线程的概念请参见《看完这篇还不懂进程、线程与线程池你来打我》。
进程和线程的运行体现在函数执行上，函数的执行除了函数内部执行的顺序执行还有子函数调用的控制转移以及子函数执行完毕的返回。其中函数内部的顺序执行乏善可陈，重点是函数的调用。
因此接下来我们的视角将从宏观的进程和线程拉近到微观下的函数调用，重点来讨论一下函数调用是怎样实现的。
函数执行的活动轨迹：栈
玩过游戏的同学应该知道，有时你为了完成一项主线任务不得不去打一些支线的任务，支线任务中可能还有支线任务，当一个支线任务完成后退回到前一个支线任务，这是什么意思呢，举个例子你就明白了。
假设主线任务西天取经 A 依赖支线任务收服孙悟空 B 和收服猪八戒 C，也就是说收服孙悟空 B 和收服猪八戒 C 完成后才能继续主线任务西天取经 A；
支线任务收服孙悟空 B 依赖任务拿到紧箍咒 D，只有当任务 D 完成后才能回到任务 B；
整个任务的依赖关系如图所示：
现在我们来模拟一下任务完成过程。
首先我们来到任务 A，执行主线任务：
执行任务 A 的过程中我们发现任务 A 依赖任务 B，这时我们暂停任务 A 去执行任务 B：
执行任务 B 的时候，我们又发现依赖任务 D："><meta property="og:title" content="函数运行时在内存中是什么样子？"><meta property="og:description" content="参考：公众号,码农的荒岛求生
在开始本篇的内容前，我们先来思考几个问题。
我们先来看一段简单的代码：
void func(int a) { if (a > 100000000) return; int arr[100] = {0}; func(a + 1); }
你能看出这段代码会有什么问题吗？
我们在上一篇文章《高性能高并发服务器是如何实现的》中提到了一项关键技术——协程，你知道协程的本质是什么吗？有的同学可能会说是用户态线程，那么什么是用户态线程，这是怎么实现的？
函数运行起来后在内存中是什么样子？
这几个问题看似没什么关联，但这背后都指向一样东西，这就是所谓的函数运行时栈，run time stack。
接下来我们就好好看看到底什么是函数运行时栈，为什么彻底理解函数运行时栈对程序员来说非常重要。
从进程、线程到函数调用
汽车在高速上行驶时有很多信息，像速度、位置等等，通过这些信息我们可以直观的感受汽车的运行时状态。
同样的，程序在运行时也有很多信息，像有哪些程序正在运行、这些程序执行到了哪里等等，通过这些信息我们可以直观的感受系统中程序运行的状态。
其中，我们创造了进程、线程这样的概念来记录有哪些程序正在运行，关于进程和线程的概念请参见《看完这篇还不懂进程、线程与线程池你来打我》。
进程和线程的运行体现在函数执行上，函数的执行除了函数内部执行的顺序执行还有子函数调用的控制转移以及子函数执行完毕的返回。其中函数内部的顺序执行乏善可陈，重点是函数的调用。
因此接下来我们的视角将从宏观的进程和线程拉近到微观下的函数调用，重点来讨论一下函数调用是怎样实现的。
函数执行的活动轨迹：栈
玩过游戏的同学应该知道，有时你为了完成一项主线任务不得不去打一些支线的任务，支线任务中可能还有支线任务，当一个支线任务完成后退回到前一个支线任务，这是什么意思呢，举个例子你就明白了。
假设主线任务西天取经 A 依赖支线任务收服孙悟空 B 和收服猪八戒 C，也就是说收服孙悟空 B 和收服猪八戒 C 完成后才能继续主线任务西天取经 A；
支线任务收服孙悟空 B 依赖任务拿到紧箍咒 D，只有当任务 D 完成后才能回到任务 B；
整个任务的依赖关系如图所示：
现在我们来模拟一下任务完成过程。
首先我们来到任务 A，执行主线任务：
执行任务 A 的过程中我们发现任务 A 依赖任务 B，这时我们暂停任务 A 去执行任务 B：
执行任务 B 的时候，我们又发现依赖任务 D："><meta property="og:type" content="article"><meta property="og:url" content="https://desistdaydream.github.io/blog/copy/%E5%85%AC%E4%BC%97%E5%8F%B7%E7%A0%81%E5%86%9C%E7%9A%84%E8%8D%92%E5%B2%9B%E6%B1%82%E7%94%9F-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AF%9D%E9%A2%98%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E5%87%BD%E6%95%B0%E8%BF%90%E8%A1%8C%E6%97%B6%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E6%98%AF%E4%BB%80%E4%B9%88%E6%A0%B7%E5%AD%90/"><meta property="article:section" content="blog"><meta property="article:modified_time" content="2023-04-15T11:50:52+08:00"><meta itemprop=name content="函数运行时在内存中是什么样子？"><meta itemprop=description content="参考：公众号,码农的荒岛求生
在开始本篇的内容前，我们先来思考几个问题。
我们先来看一段简单的代码：
void func(int a) { if (a > 100000000) return; int arr[100] = {0}; func(a + 1); }
你能看出这段代码会有什么问题吗？
我们在上一篇文章《高性能高并发服务器是如何实现的》中提到了一项关键技术——协程，你知道协程的本质是什么吗？有的同学可能会说是用户态线程，那么什么是用户态线程，这是怎么实现的？
函数运行起来后在内存中是什么样子？
这几个问题看似没什么关联，但这背后都指向一样东西，这就是所谓的函数运行时栈，run time stack。
接下来我们就好好看看到底什么是函数运行时栈，为什么彻底理解函数运行时栈对程序员来说非常重要。
从进程、线程到函数调用
汽车在高速上行驶时有很多信息，像速度、位置等等，通过这些信息我们可以直观的感受汽车的运行时状态。
同样的，程序在运行时也有很多信息，像有哪些程序正在运行、这些程序执行到了哪里等等，通过这些信息我们可以直观的感受系统中程序运行的状态。
其中，我们创造了进程、线程这样的概念来记录有哪些程序正在运行，关于进程和线程的概念请参见《看完这篇还不懂进程、线程与线程池你来打我》。
进程和线程的运行体现在函数执行上，函数的执行除了函数内部执行的顺序执行还有子函数调用的控制转移以及子函数执行完毕的返回。其中函数内部的顺序执行乏善可陈，重点是函数的调用。
因此接下来我们的视角将从宏观的进程和线程拉近到微观下的函数调用，重点来讨论一下函数调用是怎样实现的。
函数执行的活动轨迹：栈
玩过游戏的同学应该知道，有时你为了完成一项主线任务不得不去打一些支线的任务，支线任务中可能还有支线任务，当一个支线任务完成后退回到前一个支线任务，这是什么意思呢，举个例子你就明白了。
假设主线任务西天取经 A 依赖支线任务收服孙悟空 B 和收服猪八戒 C，也就是说收服孙悟空 B 和收服猪八戒 C 完成后才能继续主线任务西天取经 A；
支线任务收服孙悟空 B 依赖任务拿到紧箍咒 D，只有当任务 D 完成后才能回到任务 B；
整个任务的依赖关系如图所示：
现在我们来模拟一下任务完成过程。
首先我们来到任务 A，执行主线任务：
执行任务 A 的过程中我们发现任务 A 依赖任务 B，这时我们暂停任务 A 去执行任务 B：
执行任务 B 的时候，我们又发现依赖任务 D："><meta itemprop=dateModified content="2023-04-15T11:50:52+08:00"><meta itemprop=wordCount content="347"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="函数运行时在内存中是什么样子？"><meta name=twitter:description content="参考：公众号,码农的荒岛求生
在开始本篇的内容前，我们先来思考几个问题。
我们先来看一段简单的代码：
void func(int a) { if (a > 100000000) return; int arr[100] = {0}; func(a + 1); }
你能看出这段代码会有什么问题吗？
我们在上一篇文章《高性能高并发服务器是如何实现的》中提到了一项关键技术——协程，你知道协程的本质是什么吗？有的同学可能会说是用户态线程，那么什么是用户态线程，这是怎么实现的？
函数运行起来后在内存中是什么样子？
这几个问题看似没什么关联，但这背后都指向一样东西，这就是所谓的函数运行时栈，run time stack。
接下来我们就好好看看到底什么是函数运行时栈，为什么彻底理解函数运行时栈对程序员来说非常重要。
从进程、线程到函数调用
汽车在高速上行驶时有很多信息，像速度、位置等等，通过这些信息我们可以直观的感受汽车的运行时状态。
同样的，程序在运行时也有很多信息，像有哪些程序正在运行、这些程序执行到了哪里等等，通过这些信息我们可以直观的感受系统中程序运行的状态。
其中，我们创造了进程、线程这样的概念来记录有哪些程序正在运行，关于进程和线程的概念请参见《看完这篇还不懂进程、线程与线程池你来打我》。
进程和线程的运行体现在函数执行上，函数的执行除了函数内部执行的顺序执行还有子函数调用的控制转移以及子函数执行完毕的返回。其中函数内部的顺序执行乏善可陈，重点是函数的调用。
因此接下来我们的视角将从宏观的进程和线程拉近到微观下的函数调用，重点来讨论一下函数调用是怎样实现的。
函数执行的活动轨迹：栈
玩过游戏的同学应该知道，有时你为了完成一项主线任务不得不去打一些支线的任务，支线任务中可能还有支线任务，当一个支线任务完成后退回到前一个支线任务，这是什么意思呢，举个例子你就明白了。
假设主线任务西天取经 A 依赖支线任务收服孙悟空 B 和收服猪八戒 C，也就是说收服孙悟空 B 和收服猪八戒 C 完成后才能继续主线任务西天取经 A；
支线任务收服孙悟空 B 依赖任务拿到紧箍咒 D，只有当任务 D 完成后才能回到任务 B；
整个任务的依赖关系如图所示：
现在我们来模拟一下任务完成过程。
首先我们来到任务 A，执行主线任务：
执行任务 A 的过程中我们发现任务 A 依赖任务 B，这时我们暂停任务 A 去执行任务 B：
执行任务 B 的时候，我们又发现依赖任务 D："><link rel=preload href=/scss/main.min.fe387f54b6718948c0bf2601ff90a4fd03ef4cc0f5b2a71235d60ec478692d2d.css as=style><link href=/scss/main.min.fe387f54b6718948c0bf2601ff90a4fd03ef4cc0f5b2a71235d60ec478692d2d.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script><script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script></head><body class="td-page td-blog"><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class=navbar-brand__name>断念梦</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/about/><span>关于</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/docs/><span>学习笔记</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/blog/><span class=active>博客</span></a></li><li class="nav-item dropdown mr-4 d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>中文</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/en/>English</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder=站内搜索… aria-label=站内搜索… autocomplete=off data-offline-search-index-json-src=/offline-search-index.0c94506715ec2dd081a99484f3009619.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder=站内搜索… aria-label=站内搜索… autocomplete=off data-offline-search-index-json-src=/offline-search-index.0c94506715ec2dd081a99484f3009619.json data-offline-search-base-href=/ data-offline-search-max-results=10></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav foldable-nav" id=td-section-nav><div class="nav-item dropdown d-block d-lg-none"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>中文</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/en/>English</a></div></div><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-blog-li><a href=/blog/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-blog><span>博客</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-blogcopy-li><input type=checkbox id=m-blogcopy-check checked>
<label for=m-blogcopy-check><a href=/blog/copy/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-blogcopy><span>摘抄</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blogcopybpf_article-li><input type=checkbox id=m-blogcopybpf_article-check>
<label for=m-blogcopybpf_article-check><a href=/blog/copy/bpf_article/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blogcopybpf_article><span>BPF 文章</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blogcopyprogramming-li><input type=checkbox id=m-blogcopyprogramming-check>
<label for=m-blogcopyprogramming-check><a href=/blog/copy/Programming/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-blogcopyprogramming><span>Programming</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-blogcopye4ba91e58e9fe7949f-li><input type=checkbox id=m-blogcopye4ba91e58e9fe7949f-check>
<label for=m-blogcopye4ba91e58e9fe7949f-check><a href=/blog/copy/%E4%BA%91%E5%8E%9F%E7%94%9F/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-blogcopye4ba91e58e9fe7949f><span>云原生</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blogcopye4ba91e58e9fe7949fchatgpt-e59ba2e9989fe698afe5a682e4bd95e4bdbfe794a8kubernetese79a84-li><input type=checkbox id=m-blogcopye4ba91e58e9fe7949fchatgpt-e59ba2e9989fe698afe5a682e4bd95e4bdbfe794a8kubernetese79a84-check>
<label for=m-blogcopye4ba91e58e9fe7949fchatgpt-e59ba2e9989fe698afe5a682e4bd95e4bdbfe794a8kubernetese79a84-check><a href=/blog/copy/%E4%BA%91%E5%8E%9F%E7%94%9F/ChatGPT-%E5%9B%A2%E9%98%9F%E6%98%AF%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8Kubernetes%E7%9A%84/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blogcopye4ba91e58e9fe7949fchatgpt-e59ba2e9989fe698afe5a682e4bd95e4bdbfe794a8kubernetese79a84><span>ChatGPT 团队是如何使用Kubernetes的</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blogcopye4ba91e58e9fe7949fe781b5e9ad82e68bb7e997aee4b88a-kubernetes-e69c89e4bb80e4b988e4b89ae58aa1e4bbb7e580bc-li><input type=checkbox id=m-blogcopye4ba91e58e9fe7949fe781b5e9ad82e68bb7e997aee4b88a-kubernetes-e69c89e4bb80e4b988e4b89ae58aa1e4bbb7e580bc-check>
<label for=m-blogcopye4ba91e58e9fe7949fe781b5e9ad82e68bb7e997aee4b88a-kubernetes-e69c89e4bb80e4b988e4b89ae58aa1e4bbb7e580bc-check><a href=/blog/copy/%E4%BA%91%E5%8E%9F%E7%94%9F/%E7%81%B5%E9%AD%82%E6%8B%B7%E9%97%AE%E4%B8%8A-Kubernetes-%E6%9C%89%E4%BB%80%E4%B9%88%E4%B8%9A%E5%8A%A1%E4%BB%B7%E5%80%BC/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blogcopye4ba91e58e9fe7949fe781b5e9ad82e68bb7e997aee4b88a-kubernetes-e69c89e4bb80e4b988e4b89ae58aa1e4bbb7e580bc><span>灵魂拷问，上 Kubernetes 有什么业务价值？</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blogcopye4ba91e58e9fe7949fe5a682e4bd95e69e84e5bbbae4bba5e5ba94e794a8e4b8bae4b8ade5bf83e79a84kubernetes-li><input type=checkbox id=m-blogcopye4ba91e58e9fe7949fe5a682e4bd95e69e84e5bbbae4bba5e5ba94e794a8e4b8bae4b8ade5bf83e79a84kubernetes-check>
<label for=m-blogcopye4ba91e58e9fe7949fe5a682e4bd95e69e84e5bbbae4bba5e5ba94e794a8e4b8bae4b8ade5bf83e79a84kubernetes-check><a href=/blog/copy/%E4%BA%91%E5%8E%9F%E7%94%9F/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%BB%A5%E5%BA%94%E7%94%A8%E4%B8%BA%E4%B8%AD%E5%BF%83%E7%9A%84Kubernetes/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blogcopye4ba91e58e9fe7949fe5a682e4bd95e69e84e5bbbae4bba5e5ba94e794a8e4b8bae4b8ade5bf83e79a84kubernetes><span>如何构建以应用为中心的Kubernetes</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-blogcopye585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0-li><input type=checkbox id=m-blogcopye585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0-check checked>
<label for=m-blogcopye585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0-check><a href=/blog/copy/%E5%85%AC%E4%BC%97%E5%8F%B7%E7%A0%81%E5%86%9C%E7%9A%84%E8%8D%92%E5%B2%9B%E6%B1%82%E7%94%9F-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AF%9D%E9%A2%98%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-blogcopye585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0><span>公众号,码农的荒岛求生-操作系统话题系列文章</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blogcopye585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0e585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0-li><input type=checkbox id=m-blogcopye585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0e585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0-check>
<label for=m-blogcopye585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0e585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0-check><a href=/blog/copy/%E5%85%AC%E4%BC%97%E5%8F%B7%E7%A0%81%E5%86%9C%E7%9A%84%E8%8D%92%E5%B2%9B%E6%B1%82%E7%94%9F-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AF%9D%E9%A2%98%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E5%85%AC%E4%BC%97%E5%8F%B7%E7%A0%81%E5%86%9C%E7%9A%84%E8%8D%92%E5%B2%9B%E6%B1%82%E7%94%9F-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AF%9D%E9%A2%98%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blogcopye585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0e585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0><span>公众号,码农的荒岛求生-操作系统话题系列文章</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blogcopye585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0cpu-e698afe5a682e4bd95e8afbbe58699e58685e5ad98e79a84-li><input type=checkbox id=m-blogcopye585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0cpu-e698afe5a682e4bd95e8afbbe58699e58685e5ad98e79a84-check>
<label for=m-blogcopye585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0cpu-e698afe5a682e4bd95e8afbbe58699e58685e5ad98e79a84-check><a href=/blog/copy/%E5%85%AC%E4%BC%97%E5%8F%B7%E7%A0%81%E5%86%9C%E7%9A%84%E8%8D%92%E5%B2%9B%E6%B1%82%E7%94%9F-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AF%9D%E9%A2%98%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/CPU-%E6%98%AF%E5%A6%82%E4%BD%95%E8%AF%BB%E5%86%99%E5%86%85%E5%AD%98%E7%9A%84/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blogcopye585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0cpu-e698afe5a682e4bd95e8afbbe58699e58685e5ad98e79a84><span>CPU 是如何读写内存的？</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blogcopye585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0e7a88be5ba8fe59198e5ba94e5a682e4bd95e79086e8a7a3e58685e5ad98e4b88ae7af87-li><input type=checkbox id=m-blogcopye585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0e7a88be5ba8fe59198e5ba94e5a682e4bd95e79086e8a7a3e58685e5ad98e4b88ae7af87-check>
<label for=m-blogcopye585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0e7a88be5ba8fe59198e5ba94e5a682e4bd95e79086e8a7a3e58685e5ad98e4b88ae7af87-check><a href=/blog/copy/%E5%85%AC%E4%BC%97%E5%8F%B7%E7%A0%81%E5%86%9C%E7%9A%84%E8%8D%92%E5%B2%9B%E6%B1%82%E7%94%9F-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AF%9D%E9%A2%98%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E7%A8%8B%E5%BA%8F%E5%91%98%E5%BA%94%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3%E5%86%85%E5%AD%98%E4%B8%8A%E7%AF%87/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blogcopye585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0e7a88be5ba8fe59198e5ba94e5a682e4bd95e79086e8a7a3e58685e5ad98e4b88ae7af87><span>程序员应如何理解内存：上篇</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blogcopye585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0e7a88be5ba8fe59198e5ba94e5a682e4bd95e79086e8a7a3e58685e5ad98e4b88be7af87-li><input type=checkbox id=m-blogcopye585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0e7a88be5ba8fe59198e5ba94e5a682e4bd95e79086e8a7a3e58685e5ad98e4b88be7af87-check>
<label for=m-blogcopye585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0e7a88be5ba8fe59198e5ba94e5a682e4bd95e79086e8a7a3e58685e5ad98e4b88be7af87-check><a href=/blog/copy/%E5%85%AC%E4%BC%97%E5%8F%B7%E7%A0%81%E5%86%9C%E7%9A%84%E8%8D%92%E5%B2%9B%E6%B1%82%E7%94%9F-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AF%9D%E9%A2%98%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E7%A8%8B%E5%BA%8F%E5%91%98%E5%BA%94%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3%E5%86%85%E5%AD%98%E4%B8%8B%E7%AF%87/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blogcopye585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0e7a88be5ba8fe59198e5ba94e5a682e4bd95e79086e8a7a3e58685e5ad98e4b88be7af87><span>程序员应如何理解内存：下篇</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blogcopye585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0e7a88be5ba8fe59198e5ba94e5a682e4bd95e79086e8a7a3e58685e5ad98e4b8ade7af87-li><input type=checkbox id=m-blogcopye585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0e7a88be5ba8fe59198e5ba94e5a682e4bd95e79086e8a7a3e58685e5ad98e4b8ade7af87-check>
<label for=m-blogcopye585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0e7a88be5ba8fe59198e5ba94e5a682e4bd95e79086e8a7a3e58685e5ad98e4b8ade7af87-check><a href=/blog/copy/%E5%85%AC%E4%BC%97%E5%8F%B7%E7%A0%81%E5%86%9C%E7%9A%84%E8%8D%92%E5%B2%9B%E6%B1%82%E7%94%9F-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AF%9D%E9%A2%98%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E7%A8%8B%E5%BA%8F%E5%91%98%E5%BA%94%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3%E5%86%85%E5%AD%98%E4%B8%AD%E7%AF%87/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blogcopye585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0e7a88be5ba8fe59198e5ba94e5a682e4bd95e79086e8a7a3e58685e5ad98e4b8ade7af87><span>程序员应如何理解内存：中篇</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-blogcopye585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0e587bde695b0e8bf90e8a18ce697b6e59ca8e58685e5ad98e4b8ade698afe4bb80e4b988e6a0b7e5ad90-li><input type=checkbox id=m-blogcopye585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0e587bde695b0e8bf90e8a18ce697b6e59ca8e58685e5ad98e4b8ade698afe4bb80e4b988e6a0b7e5ad90-check checked>
<label for=m-blogcopye585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0e587bde695b0e8bf90e8a18ce697b6e59ca8e58685e5ad98e4b8ade698afe4bb80e4b988e6a0b7e5ad90-check><a href=/blog/copy/%E5%85%AC%E4%BC%97%E5%8F%B7%E7%A0%81%E5%86%9C%E7%9A%84%E8%8D%92%E5%B2%9B%E6%B1%82%E7%94%9F-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AF%9D%E9%A2%98%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E5%87%BD%E6%95%B0%E8%BF%90%E8%A1%8C%E6%97%B6%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E6%98%AF%E4%BB%80%E4%B9%88%E6%A0%B7%E5%AD%90/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-blogcopye585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0e587bde695b0e8bf90e8a18ce697b6e59ca8e58685e5ad98e4b8ade698afe4bb80e4b988e6a0b7e5ad90><span class=td-sidebar-nav-active-item>函数运行时在内存中是什么样子？</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blogcopye585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0e7a59ee7a798e794b3e8afb7e58685e5ad98e697b6e5ba95e5b182e58f91e7949fe4ba86e4bb80e4b988-li><input type=checkbox id=m-blogcopye585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0e7a59ee7a798e794b3e8afb7e58685e5ad98e697b6e5ba95e5b182e58f91e7949fe4ba86e4bb80e4b988-check>
<label for=m-blogcopye585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0e7a59ee7a798e794b3e8afb7e58685e5ad98e697b6e5ba95e5b182e58f91e7949fe4ba86e4bb80e4b988-check><a href=/blog/copy/%E5%85%AC%E4%BC%97%E5%8F%B7%E7%A0%81%E5%86%9C%E7%9A%84%E8%8D%92%E5%B2%9B%E6%B1%82%E7%94%9F-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AF%9D%E9%A2%98%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E7%A5%9E%E7%A7%98%E7%94%B3%E8%AF%B7%E5%86%85%E5%AD%98%E6%97%B6%E5%BA%95%E5%B1%82%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blogcopye585ace4bc97e58fb7e7a081e5869ce79a84e88d92e5b29be6b182e7949f-e6938de4bd9ce7b3bbe7bb9fe8af9de9a298e7b3bbe58897e69687e7aba0e7a59ee7a798e794b3e8afb7e58685e5ad98e697b6e5ba95e5b182e58f91e7949fe4ba86e4bb80e4b988><span>神秘！申请内存时底层发生了什么？</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blogcopyce4x63tyxoqrdinifewqeg-li><input type=checkbox id=m-blogcopyce4x63tyxoqrdinifewqeg-check>
<label for=m-blogcopyce4x63tyxoqrdinifewqeg-check><a href=/blog/copy/cE4x63tYxoqrDinifeWqeg/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blogcopyce4x63tyxoqrdinifewqeg><span>硬核致敬Linux ！30岁生日快乐！</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blogcopyext_filesystem-li><input type=checkbox id=m-blogcopyext_filesystem-check>
<label for=m-blogcopyext_filesystem-check><a href=/blog/copy/ext_filesystem/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blogcopyext_filesystem><span>ext 文件系统机制原理剖析</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blogcopye5a49acpue69eb6e69e84e997aee9a298e5a49a-cpu-e69eb6e69e84e997aee9a298-li><input type=checkbox id=m-blogcopye5a49acpue69eb6e69e84e997aee9a298e5a49a-cpu-e69eb6e69e84e997aee9a298-check>
<label for=m-blogcopye5a49acpue69eb6e69e84e997aee9a298e5a49a-cpu-e69eb6e69e84e997aee9a298-check><a href=/blog/copy/%E5%A4%9ACPU%E6%9E%B6%E6%9E%84%E9%97%AE%E9%A2%98/%E5%A4%9A-CPU-%E6%9E%B6%E6%9E%84%E9%97%AE%E9%A2%98/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blogcopye5a49acpue69eb6e69e84e997aee9a298e5a49a-cpu-e69eb6e69e84e997aee9a298><span></span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blogcopylnw3wdj0cq88qv8bhsvwzw-li><input type=checkbox id=m-blogcopylnw3wdj0cq88qv8bhsvwzw-check>
<label for=m-blogcopylnw3wdj0cq88qv8bhsvwzw-check><a href=/blog/copy/Lnw3wdJ0CQ88QV8bHsvWzw/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blogcopylnw3wdj0cq88qv8bhsvwzw><span>「你天天关注这些新闻有什么用？」</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blogcopymvo3s_f0roxctoawrtcnla-li><input type=checkbox id=m-blogcopymvo3s_f0roxctoawrtcnla-check>
<label for=m-blogcopymvo3s_f0roxctoawrtcnla-check><a href=/blog/copy/mVo3S_F0RoxCToawrTCnlA/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blogcopymvo3s_f0roxctoawrtcnla><span>Linux Torvalds 采访</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blogcopye588abe79c8b-dns-e6b1a1e69f93e997b9e5be97e6aca2e78eb0e59ca8e68891e794a8-coredns-e5b086e5ae83e68b89e6b885e58d95-li><input type=checkbox id=m-blogcopye588abe79c8b-dns-e6b1a1e69f93e997b9e5be97e6aca2e78eb0e59ca8e68891e794a8-coredns-e5b086e5ae83e68b89e6b885e58d95-check>
<label for=m-blogcopye588abe79c8b-dns-e6b1a1e69f93e997b9e5be97e6aca2e78eb0e59ca8e68891e794a8-coredns-e5b086e5ae83e68b89e6b885e58d95-check><a href=/blog/copy/%E5%88%AB%E7%9C%8B-DNS-%E6%B1%A1%E6%9F%93%E9%97%B9%E5%BE%97%E6%AC%A2%E7%8E%B0%E5%9C%A8%E6%88%91%E7%94%A8-CoreDNS-%E5%B0%86%E5%AE%83%E6%8B%89%E6%B8%85%E5%8D%95/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blogcopye588abe79c8b-dns-e6b1a1e69f93e997b9e5be97e6aca2e78eb0e59ca8e68891e794a8-coredns-e5b086e5ae83e68b89e6b885e58d95><span>别看 DNS 污染闹得欢，现在我用 CoreDNS 将它拉清单</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blogcopys_qacahm9elc9_jkrxl2cw-li><input type=checkbox id=m-blogcopys_qacahm9elc9_jkrxl2cw-check>
<label for=m-blogcopys_qacahm9elc9_jkrxl2cw-check><a href=/blog/copy/s_QacAHM9ELc9_jkrxL2cw/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blogcopys_qacahm9elc9_jkrxl2cw><span>程序员的酒后真言</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blogcopye8b083e5baa6e7b3bbe7bb9fe8aebee8aea1e7b2bee8a681-li><input type=checkbox id=m-blogcopye8b083e5baa6e7b3bbe7bb9fe8aebee8aea1e7b2bee8a681-check>
<label for=m-blogcopye8b083e5baa6e7b3bbe7bb9fe8aebee8aea1e7b2bee8a681-check><a href=/blog/copy/%E8%B0%83%E5%BA%A6%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E7%B2%BE%E8%A6%81/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blogcopye8b083e5baa6e7b3bbe7bb9fe8aebee8aea1e7b2bee8a681><span>调度系统设计精要</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blogcopybhdkikwcnzpmo-hz-hqreq-li><input type=checkbox id=m-blogcopybhdkikwcnzpmo-hz-hqreq-check>
<label for=m-blogcopybhdkikwcnzpmo-hz-hqreq-check><a href=/blog/copy/bHdkIkWCNZPmO-Hz-HQreQ/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blogcopybhdkikwcnzpmo-hz-hqreq><span>二十年老程序员的二十条心得：面试几乎没用，警惕很久没写过代码的“大牛”</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blogmy-first-blog-li><input type=checkbox id=m-blogmy-first-blog-check>
<label for=m-blogmy-first-blog-check><a href=/blog/My-first-blog/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blogmy-first-blog><span>My first blog</span></a></label></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/DesistDaydream/notes-learning/tree/main/content/zh-cn/blog/copy/%e5%85%ac%e4%bc%97%e5%8f%b7,%e7%a0%81%e5%86%9c%e7%9a%84%e8%8d%92%e5%b2%9b%e6%b1%82%e7%94%9f-%e6%93%8d%e4%bd%9c%e7%b3%bb%e7%bb%9f%e8%af%9d%e9%a2%98%e7%b3%bb%e5%88%97%e6%96%87%e7%ab%a0/%e5%87%bd%e6%95%b0%e8%bf%90%e8%a1%8c%e6%97%b6%e5%9c%a8%e5%86%85%e5%ad%98%e4%b8%ad%e6%98%af%e4%bb%80%e4%b9%88%e6%a0%b7%e5%ad%90%ef%bc%9f.md class=td-page-meta--view target=_blank rel=noopener><i class="fa-solid fa-file-lines fa-fw"></i> 查看页面源码</a>
<a href=https://github.com/DesistDaydream/notes-learning/edit/main/content/zh-cn/blog/copy/%e5%85%ac%e4%bc%97%e5%8f%b7,%e7%a0%81%e5%86%9c%e7%9a%84%e8%8d%92%e5%b2%9b%e6%b1%82%e7%94%9f-%e6%93%8d%e4%bd%9c%e7%b3%bb%e7%bb%9f%e8%af%9d%e9%a2%98%e7%b3%bb%e5%88%97%e6%96%87%e7%ab%a0/%e5%87%bd%e6%95%b0%e8%bf%90%e8%a1%8c%e6%97%b6%e5%9c%a8%e5%86%85%e5%ad%98%e4%b8%ad%e6%98%af%e4%bb%80%e4%b9%88%e6%a0%b7%e5%ad%90%ef%bc%9f.md class=td-page-meta--edit target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> 编辑此页</a>
<a href="https://github.com/DesistDaydream/notes-learning/new/main/content/zh-cn/blog/copy/%e5%85%ac%e4%bc%97%e5%8f%b7,%e7%a0%81%e5%86%9c%e7%9a%84%e8%8d%92%e5%b2%9b%e6%b1%82%e7%94%9f-%e6%93%8d%e4%bd%9c%e7%b3%bb%e7%bb%9f%e8%af%9d%e9%a2%98%e7%b3%bb%e5%88%97%e6%96%87%e7%ab%a0/%e5%87%bd%e6%95%b0%e8%bf%90%e8%a1%8c%e6%97%b6%e5%9c%a8%e5%86%85%e5%ad%98%e4%b8%ad%e6%98%af%e4%bb%80%e4%b9%88%e6%a0%b7%e5%ad%90%ef%bc%9f.md?filename=change-me.md&amp;value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" class=td-page-meta--child target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> 添加子页面</a>
<a href="https://github.com/DesistDaydream/notes-learning/issues/new?title=%e5%87%bd%e6%95%b0%e8%bf%90%e8%a1%8c%e6%97%b6%e5%9c%a8%e5%86%85%e5%ad%98%e4%b8%ad%e6%98%af%e4%bb%80%e4%b9%88%e6%a0%b7%e5%ad%90%ef%bc%9f" class=td-page-meta--issue target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> 提交文档问题</a>
<a href=https://github.com/DesistDaydream/desistdaydream.github.io/issues/new class=td-page-meta--project-issue target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> 提交项目问题</a></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5 pr-md-4" role=main><a class=td-rss-button title=RSS href=https://desistdaydream.github.io/blog/copy/%E5%85%AC%E4%BC%97%E5%8F%B7%E7%A0%81%E5%86%9C%E7%9A%84%E8%8D%92%E5%B2%9B%E6%B1%82%E7%94%9F-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AF%9D%E9%A2%98%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/index.xml target=_blank rel=noopener><i class="fa-solid fa-rss" aria-hidden=true></i></a><div class=td-content><h1>函数运行时在内存中是什么样子？</h1><div class="td-byline mb-4"><time datetime=0001-01-01 class=text-muted>Monday, January 01, 0001</time></div><header class=article-meta></header><blockquote><p>参考：<a href=https://mp.weixin.qq.com/s/CIK6oYeAtjXyh9oCfCFnxA>公众号,码农的荒岛求生</a></p></blockquote><p>在开始本篇的内容前，我们先来思考几个问题。</p><ol><li><p>我们先来看一段简单的代码：</p><p>void func(int a) {
if (a > 100000000) return;
int arr[100] = {0};
func(a + 1);
}</p></li></ol><p>你能看出这段代码会有什么问题吗？</p><ol start=2><li><p>我们在上一篇文章《<strong>高性能高并发服务器是如何实现的</strong>》中提到了一项关键技术——协程，你知道协程的本质是什么吗？有的同学可能会说是用户态线程，那么什么是用户态线程，这是怎么实现的？</p></li><li><p>函数运行起来后在内存中是什么样子？</p></li></ol><p>这几个问题看似没什么关联，但这背后都指向一样东西，这就是所谓的函数<strong>运行时栈</strong>，<strong>run time stack</strong>。</p><p>接下来我们就好好看看到底什么是函数运行时栈，为什么彻底理解函数运行时栈对程序员来说非常重要。</p><p><strong>从进程、线程到函数调用</strong></p><p>汽车在高速上行驶时有很多信息，像速度、位置等等，通过这些信息我们可以直观的感受汽车的运行时状态。</p><p><img src=https://notes-learning.oss-cn-beijing.aliyuncs.com/wid7ue/1616167863819-23f4e86d-49f6-4ae3-bc42-2d6b58e4b526.png alt></p><p>同样的，程序在运行时也有很多信息，像有哪些程序正在运行、这些程序执行到了哪里等等，通过这些信息我们可以直观的感受系统中程序运行的状态。</p><p>其中，我们创造了进程、线程这样的概念来记录有哪些程序正在运行，关于进程和线程的概念请参见《<strong>看完这篇还不懂进程、线程与线程池你来打我</strong>》。</p><p><strong>进程和线程的运行体现在函数执行上</strong>，函数的执行除了函数内部执行的顺序执行还有子函数调用的控制转移以及子函数执行完毕的返回。其中函数内部的顺序执行乏善可陈，重点是函数的调用。</p><p>因此接下来我们的视角将从宏观的进程和线程拉近到微观下的函数调用，重点来讨论一下函数调用是怎样实现的。</p><p><strong>函数执行的活动轨迹：栈</strong></p><p>玩过游戏的同学应该知道，有时你为了完成一项主线任务不得不去打一些支线的任务，支线任务中可能还有支线任务，当一个支线任务完成后退回到前一个支线任务，这是什么意思呢，举个例子你就明白了。</p><p>假设主线任务西天取经 A 依赖支线任务收服孙悟空 B 和收服猪八戒 C，也就是说收服孙悟空 B 和收服猪八戒 C 完成后才能继续主线任务西天取经 A；</p><p>支线任务收服孙悟空 B 依赖任务拿到紧箍咒 D，只有当任务 D 完成后才能回到任务 B；</p><p>整个任务的依赖关系如图所示：</p><p><img src=https://notes-learning.oss-cn-beijing.aliyuncs.com/wid7ue/1616167863816-401e714c-969d-4c84-809d-da6dbda9afd5.png alt></p><p>现在我们来模拟一下任务完成过程。</p><p>首先我们来到任务 A，执行主线任务：</p><p><img src=https://notes-learning.oss-cn-beijing.aliyuncs.com/wid7ue/1616167863838-f93491ad-74b3-4a4d-b08d-25d9696c481f.png alt></p><p>执行任务 A 的过程中我们发现任务 A 依赖任务 B，这时我们暂停任务 A 去执行任务 B：</p><p><img src=https://notes-learning.oss-cn-beijing.aliyuncs.com/wid7ue/1616167863822-2de8c022-ddff-4ed8-baa2-0f25fb36ccd2.png alt></p><p>执行任务 B 的时候，我们又发现依赖任务 D：</p><p><img src=https://notes-learning.oss-cn-beijing.aliyuncs.com/wid7ue/1616167863845-17cae4f5-01ec-424e-ae6e-917c687207e5.png alt></p><p>执行任务 D 的时候我们发现该任务不再依赖任何其它任务，因此 C 完成后我们可以会退到前一个任务，也就是 B：</p><p><img src=https://notes-learning.oss-cn-beijing.aliyuncs.com/wid7ue/1616167863842-63a7ee82-9067-443a-a905-0f89e32625f4.png alt></p><p>任务 B 除了依赖任务 C 外不再依赖其它任务，这样任务 B 完成后就可以回到任务 A：</p><p><img src=https://notes-learning.oss-cn-beijing.aliyuncs.com/wid7ue/1616167863837-23f565d8-34ab-4b12-81b3-e95e1cb5c5eb.png alt></p><p>现在我们回到了主线任务 A，依赖的任务 B 执行完成，接下来是任务 C：</p><p><img src=https://notes-learning.oss-cn-beijing.aliyuncs.com/wid7ue/1616167863822-9b6d5976-5e0b-4b48-b2c9-c74286a5a3bd.png alt></p><p>和任务 D 一样，C 不依赖任何其它其它任务，任务 C 完成后就可以再次回到任务 A，再之后任务 A 执行完毕，整个任务执行完成。</p><p>让我们来看一下整个任务的活动轨迹：</p><p><img src=https://notes-learning.oss-cn-beijing.aliyuncs.com/wid7ue/1616167863834-ae1821d1-8421-46e4-b2d9-fd695b0faabf.png alt></p><p>仔细观察，实际上你会发现这是一个 First In Last Out 的顺序，天然适用于栈这种数据结构来处理。</p><p>再仔细看一下栈顶的轨迹，也就是 A、B、D、B、A、C、A，<strong>实际上你会发现这里的轨迹就是任务依赖树的遍历过程</strong>，是不是很神奇，这也是为什么树这种数据结构的遍历除了可以用递归也可以用栈来实现的原因。</p><p><strong>A Box</strong></p><p>函数调用也是同样的道理，你把上面的 ABCD 换成函数 ABCD，本质不变。</p><p>因此，现在我们知道了，使用栈这种结构就可以用来保存函数调用信息。</p><p>和游戏中的每个任务一样，当函数在运行时每个函数也要有自己的一个“小盒子”，<strong>这个小盒子中保存了函数运行时的各种信息</strong>，这些小盒子通过栈这种结构组织起来，这个小盒子就被称为栈帧，stack frames，也有的称之为 call stack，不管用什么命名方式，总之，就是这里所说的小盒子，这个小盒子就是函数运行起来后占用的内存，<strong>这些小盒子构成了我们通常所说的栈区</strong>。关于栈区详细的讲解你可以参考《<strong>深入理解操作系统：程序员应如何理解内存</strong>》一文。</p><p>那么函数调用时都有哪些信息呢？</p><p><strong>控制转移</strong></p><p>我们知道当函数 A 调用函数 B 的时候，控制从 A 转移到了 B，所谓控制其实就是指 CPU 执行属于哪个函数的机器指令，CPU 从开始执行属于函数 A 的指令切换到执行属于函数 B 的指令，我们就说控制从函数 A 转移到了函数 B。</p><p>控制从函数 A 转移到函数 B，那么我们需要有这样两个信息：</p><ul><li>我从哪里来 (返回)</li><li>要到去哪里 (跳转)</li></ul><p>是不是很简单，就好比你出去旅游，你需要知道去哪里，还需要记住回家的路。</p><p>函数调用也是同样的道理。</p><p>当函数 A 调用函数 B 时，我们只要知道：</p><ul><li>函数 A 对于的机器指令执行到了哪里 (我从哪里来，返回)</li><li>函数 B 第一条机器指令所在的地址 (要到哪里去，跳转)</li></ul><p>有这两条信息就足以让 CPU 开始执行函数 B 对应的机器指令，当函数 B 执行完毕后跳转回函数 A。</p><p>那么这些信息是怎么获取并保持的呢？</p><p>现在我们就可以打开这个小盒子，看看是怎么使用的了。</p><p>假设函数 A 调用函数 B，如图所示：</p><p><img src=https://notes-learning.oss-cn-beijing.aliyuncs.com/wid7ue/1616167863830-03b8519b-e4cf-487c-ace0-4898c498f187.png alt></p><p>当前，CPU 执行函数 A 的机器指令，该指令的地址为 0x400564，接下来 CPU 将执行下一条机器指令也就是:</p><pre><code>call 0x400540
</code></pre><p>1
Plain Text</p><p>这条机器指令是什么意思呢？</p><p>这条机器指令对应的就是我们在代码中所写的函数调用，注意 call 后有一条机器指令地址，注意观察上图你会看到，<strong>该地址就是函数 B 的第一条机器指令</strong>，从这条机器指令后 CPU 将跳转到函数 B。</p><p>现在我们已经解决了控制跳转的“要到哪里去”问题，当函数 B 执行完毕后怎么跳转回来呢？</p><p>原来，call 指令除了给出跳转地址之外还有这样一个作用，也就是<strong>把 call 指令的下一条指令的地址，也就是 0x40056a push 到函数 A 的栈帧中</strong>，如图所示：</p><p><img src=https://notes-learning.oss-cn-beijing.aliyuncs.com/wid7ue/1616167863876-d1603ae8-ef26-4c08-9ac2-b726e0bcd29d.png alt></p><p>现在，函数 A 的小盒子变大了一些，因为装入了返回地址：</p><p><img src=https://notes-learning.oss-cn-beijing.aliyuncs.com/wid7ue/1616167863851-cab15852-0eac-40e6-a7f5-4a90c7945322.png alt></p><p>现在 CPU 开始执行函数 B 对应的机器指令，注意观察，函数 B 也有一个属于自己的小盒子(栈帧)，可以往里面扔一些必要的信息。</p><p><img src=https://notes-learning.oss-cn-beijing.aliyuncs.com/wid7ue/1616167863856-d73384c9-8f41-4d32-9b45-6444bb58fa6f.png alt></p><p>如果函数 B 中又调用了其它函数呢？</p><p>道理和函数 A 调用函数 B 是一样的。</p><p>让我们来看一下函数 B 最后一条机器指令 ret，这条机器指令的作用是告诉 CPU 跳转到函数 A 保存在栈帧上的返回地址，这样当函数 B 执行完毕后就可以跳转到函数 A 继续执行了。</p><p>至此，我们解决了控制转移中“我从哪里来”的问题。</p><p><strong>传递参数与获取返回值</strong></p><p>函数调用与返回使得我们可以编写函数，进行函数调用。但调用函数除了提供函数名称之外还需要传递参数以及获取返回值，那么这又是怎样实现的呢？</p><p>在 x86-64 中，多数情况下参数的传递与获取返回值是通过<strong>寄存器</strong>来实现的。</p><p>假设函数 A 调用了函数 B，函数 A 将一些参数写入相应的寄存器，当 CPU 执行函数 B 时就可以从这些寄存器中获取参数了。</p><p>同样的，函数 B 也可以将返回值写入寄存器，当函数 B 执行结束后函数 A 从该寄存器中就可以读取到返回值了。</p><p>我们知道寄存器的数量是有限的，当传递的参数个数多于寄存器的数量该怎么办呢？</p><p>这时那个属于函数的小盒子也就是栈帧又能发挥作用了。</p><p>原来，当参数个数多于寄存器数量时剩下的参数直接放到栈帧中，这样被调函数就可以<strong>从前一个函数的栈帧中获取到参数了</strong>。</p><p>现在栈帧的样子又可以进一步丰富了，如图所示：</p><p><img src=https://notes-learning.oss-cn-beijing.aliyuncs.com/wid7ue/1616167863886-677bf64d-2fed-494a-9752-f05d4c190543.png alt></p><p>从图中我们可以看到，调用函数 B 时有部分参数放到了函数 A 的栈帧中，同时函数 A 栈帧的顶部依然保存的是返回地址。</p><p><strong>局部变量</strong></p><p>我们知道在函数内部定义的变量被称为局部变量，这些变量在函数运行时被放在了哪里呢？</p><p>原来，这些变量同样可以放在寄存器中，但是当局部变量的数量超过寄存器的时候这些变量就必须放到栈帧中了。</p><p>因此，我们的栈帧内容又一步丰富了。</p><p><img src=https://notes-learning.oss-cn-beijing.aliyuncs.com/wid7ue/1616167863839-6619e28e-de13-488e-8a5e-cea1eac87441.png alt></p><p>细心的同学可能会有这样的疑问，我们知道寄存器是共享资源可以被所有函数使用，既然可以将函数 A 的局部变量写入寄存器，那么当函数 A 调用函数 B 时，函数 B 的局部变量也可以写到寄存器，这样的话当函数 B 执行完毕回到函数 A 时寄存器的值已经被函数 B 修改过了，这样会有问题吧。</p><p>这样的确会有问题，因此我们在向寄存器中写入局部变量之前，<strong>一定要先将寄存器中开始的值保存起来</strong>，当寄存器使用完毕后再恢复原值就可以了。</p><p>那么我们要将寄存器中的原始值保存在哪里呢？</p><p>有的同学可能已经猜到了，没错，依然是函数的栈帧中。</p><p><img src=https://notes-learning.oss-cn-beijing.aliyuncs.com/wid7ue/1616167863856-bcf721f0-0db5-4faa-9eae-99683999d194.png alt></p><p>最终，我们的小盒子就变成了如图所示的样子，当寄存器使用完毕后根据栈帧中保存的初始值恢复其内容就可以了。</p><p>现在你应该知道函数在运行时到底是什么样子了吧，以上就是问题 3 的答案。</p><p><strong>Big Picture</strong></p><p>需要再次强调的一点就是，上述讨论的栈帧就位于我们常说的栈区。</p><p>栈区，属于进程地址空间的一部分，如图所示，我们将栈区放大就是图左边的样子。</p><p><img src=https://notes-learning.oss-cn-beijing.aliyuncs.com/wid7ue/1616167863877-0efea1a4-debc-473e-88a6-977d82c4969f.png alt></p><p>关于栈区详细的讲解你可以参考《<strong>深入理解操作系统：程序员应如何理解内存</strong>》这篇。</p><p>最后，让我们回到文章开始的这段简单代码：</p><pre><code>void func(int a) {
    if (a &gt; 100000000) return;
    int arr[100] = {0};
    func(a + 1);
}
void main(){
    func(0);
}
</code></pre><p>1
2
3
4
5
6
7
8
9
10
Plain Text</p><p>想一想这段代码会有什么问题？</p><p>原来，<strong>栈区是有大小限制的</strong>，当超过限制后就会出现著名的<strong>栈溢出</strong>问题，显然上述代码会导致这一问题的出现。</p><p>因此：</p><ol><li>不要创建过大的局部变量</li><li>函数栈帧，也就是调用层次不能太多</li></ol><p><strong>总结</strong></p><p>本章我们从几个看似没什么关联的问题出发，详细讲解了函数运行时栈是怎么一回事，为什么我们不能创建过多的局部变量。细心的同学会发现第 2 个问题我们没有解答，这个问题的讲解放到下一篇，也就是协程中讲解。</p><p>希望这篇文章能对大家理解函数运行时栈有所帮助。</p><ul class="list-unstyled d-flex justify-content-between align-items-center mb-0 pt-5"><li><a href=/blog/copy/%E5%85%AC%E4%BC%97%E5%8F%B7%E7%A0%81%E5%86%9C%E7%9A%84%E8%8D%92%E5%B2%9B%E6%B1%82%E7%94%9F-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AF%9D%E9%A2%98%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E7%A5%9E%E7%A7%98%E7%94%B3%E8%AF%B7%E5%86%85%E5%AD%98%E6%97%B6%E5%BA%95%E5%B1%82%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/ aria-label="上一页 - 神秘！申请内存时底层发生了什么？" class="btn btn-primary"><span class=mr-1>←</span>上一页</a></li><li><a href=/blog/copy/%E5%85%AC%E4%BC%97%E5%8F%B7%E7%A0%81%E5%86%9C%E7%9A%84%E8%8D%92%E5%B2%9B%E6%B1%82%E7%94%9F-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AF%9D%E9%A2%98%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E7%A8%8B%E5%BA%8F%E5%91%98%E5%BA%94%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3%E5%86%85%E5%AD%98%E4%B8%AD%E7%AF%87/ aria-label="下一页 - 程序员应如何理解内存：中篇" class="btn btn-primary">下一页<span class=ml-1>→</span></a></li></ul></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="User mailing list" aria-label="User mailing list"><a class=text-white target=_blank rel=noopener href=https://example.org/mail aria-label="User mailing list"><i class="fa fa-envelope"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel=noopener href=https://example.org/twitter aria-label=Twitter><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank rel=noopener href=https://example.org/stack aria-label="Stack Overflow"><i class="fab fa-stack-overflow"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/DesistDaydream aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank rel=noopener href=https://example.org/slack aria-label=Slack><i class="fab fa-slack"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Developer mailing list" aria-label="Developer mailing list"><a class=text-white target=_blank rel=noopener href=https://example.org/mail aria-label="Developer mailing list"><i class="fa fa-envelope"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><p class=mt-2><a href=/about/>关于我</a></p></div></div></div></footer></div><script src=/js/main.min.11dd0d4300ec82ff369d87764bc4d1000f19606ec0279c97f26dacab57607268.js integrity="sha256-Ed0NQwDsgv82nYd2S8TRAA8ZYG7AJ5yX8m2sq1dgcmg=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script></body></html>